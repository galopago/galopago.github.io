<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="https://galopago.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://galopago.github.io/" rel="alternate" type="text/html" /><updated>2021-10-25T21:51:08-05:00</updated><id>https://galopago.github.io/feed.xml</id><title type="html">Galopago projects</title><subtitle>Open source and Open hardware electronic projects</subtitle><author><name>Editor</name></author><entry><title type="html">Halloween talking clock based on Rpi Pico</title><link href="https://galopago.github.io/english/halloween-talking-clock-based-on-rpi-pico/" rel="alternate" type="text/html" title="Halloween talking clock based on Rpi Pico" /><published>2021-10-21T00:00:00-05:00</published><updated>2021-10-21T00:00:00-05:00</updated><id>https://galopago.github.io/english/halloween-talking-clock-based-on-rpi-pico</id><content type="html" xml:base="https://galopago.github.io/english/halloween-talking-clock-based-on-rpi-pico/">&lt;p&gt;Halloween talking clock that plays sounds every O’clock hour. Only a few external components (easy to source and solder) needed. The single side board could be manufactured at home. Very customizable project than involves multiple knowledge areas (&lt;a href=&quot;https://en.wikipedia.org/wiki/STEAM_fields&quot;&gt;STEAM&lt;/a&gt;): Electronics, programming, woodworking, arts, etc.&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Customized clock hanging on a wall&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p class=&quot;notice--danger&quot;&gt;Key component: &lt;a href=&quot;https://s.click.aliexpress.com/e/_AfCGIL&quot;&gt;Quartz clock movement with trigger&lt;/a&gt;&lt;/p&gt;

&lt;h5 id=&quot;concept&quot;&gt;Concept:&lt;/h5&gt;

&lt;p&gt;A lot of musical wall clocks on the market lacks the possibility of change original sounds. A clock with that capability can be built with an embedded system. But which one to choose? Raspberry Pi Pico was chosen for the 3 following reasons:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;There’s no need to install software for initial firmware download&lt;/li&gt;
  &lt;li&gt;Onboard memory 2 MegaBytes of flash can store some amount of sounds without requiring external memory&lt;/li&gt;
  &lt;li&gt;Can be powered by 2xAA batteries without additional components&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Rpi Pico draws about 1.6 mA in it’s lowest power mode (deep sleep). Seems not much, but is too high for a battery powered circuit, because they will exhaust in around two months. For that reason an external power circuit that can shut off the board completely was added. After that, power consumption lowered to 70 uA, so batteries will last for a year.&lt;/p&gt;

&lt;p&gt;The Rpi Pico acts as sound storage and player. To show the time and generate an O’clock signal, a quartz clock movement with trigger was used. Combining these 2 elements a talking sound clock was born&lt;/p&gt;

&lt;h4 id=&quot;key-features&quot;&gt;Key features:&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;Two versions of the (almost) same application: One developed in &lt;a href=&quot;https://www.adafruit.com/circuitpython&quot;&gt;CircuitPython&lt;/a&gt; and the other in the &lt;a href=&quot;https://github.com/raspberrypi/pico-sdk&quot;&gt;C/C++ SDK&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Compatible with the most common operating systems.&lt;/li&gt;
  &lt;li&gt;No need to install apps for initial firmware download&lt;/li&gt;
  &lt;li&gt;There’s no need to recompile code (in the app developed in CircuitPython) to change sounds&lt;/li&gt;
  &lt;li&gt;Up to 3 years in standby mode using a pair of AA batteries.&lt;/li&gt;
  &lt;li&gt;Easy to source, and solder components.&lt;/li&gt;
&lt;/ul&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/rpi_pico_sound_clock.png&quot;&gt; &lt;img src=&quot;/assets/images/rpi_pico_sound_clock.png&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Simplified diagram of the power circuit&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h5 id=&quot;software&quot;&gt;Software:&lt;/h5&gt;

&lt;p&gt;Right after power on, Rpi Pico puts a low level on the GPIO that is wired to the power circuit to keep it powered, then decides which file should be played, and after the sound finishes, a high level is put on the GPIO powering off the Pico. Additionally a light sensor is read to not play sound when is dark (night).&lt;/p&gt;

&lt;p&gt;Sound files are played sequentially, one by one on each power on. A pointer to the next file is stored in nonvolatile memory, be carefully modifying the program to keep writing at a minimum.&lt;/p&gt;

&lt;h6 id=&quot;peculiarities-of-the-sdk-cc-version&quot;&gt;PECULIARITIES OF THE SDK C/C++ VERSION:&lt;/h6&gt;

&lt;p&gt;Sounds to be played must be converted first to WAV format 16 bit mono @ 44100 Hz, then converted to C arrays[] before compiling. The application uses a PWM via digital output and interrupts to play sounds.&lt;/p&gt;

&lt;p&gt;The program execution starts almost immediately after power on. The main disadvantage of the application for now, it only supports .WAV files which are big, and cannot be changed without recompiling code&lt;/p&gt;

&lt;h6 id=&quot;peculiarities-of-the-circuitpython-version&quot;&gt;PECULIARITIES OF THE CIRCUITPYTHON VERSION:&lt;/h6&gt;

&lt;p&gt;Sounds to be played must be converted to MP3 mono format, The app uses audiomp3 and audiopwmio modules to output audio out of a digital pin (PWM). These files are stored in the filesystem provided by CP, so modifying them is straightforward, just drag and drop.&lt;/p&gt;

&lt;p&gt;MP3 files can store about 10 more sound time than WAV for the same file size, however CircuitPython runtime execution takes more than a second after power on, so probably it won’t be a good thing for any kind of final application&lt;/p&gt;

&lt;h5 id=&quot;hardware&quot;&gt;Hardware:&lt;/h5&gt;
&lt;p&gt;External components are part of one of the three different functionalities:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;On/Off&lt;/strong&gt; : The circuit is made up by a MOSFET, Drain terminal connected to 3V3_EN and the Source terminal connected to GND. Connected to the gate are 2 elements: A capacitor to ground, and a resistor to V+. The circuit works in the following way:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Step 1: Capacitor is fully charged, turning on the MOSFET and tying 3V3_EN to ground totally powering off Rpi Pico board&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Step 2: Capacitor is quickly discharged by the brief closure of the contacts of the clock movement, turning off the MOSFET, and powering on the Rpi Pico. The first thing to do after power up, is keeping the capacitor discharged with the aid of a GPIO output in low level.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Step 3: While sound is played, low level on the GPIO is kept. Once sound finishes, GPIO output turned high level, so MOSFET turns on again, powering off the Rpi Pico until the next switch closure&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Audio amplifier&lt;/strong&gt;: Single-stage, single NPN transistor powers a small 8 Ohm speaker. There is also an input RC low pass filter to smooth noise due to the PWM output.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Day/night detection&lt;/strong&gt;: Visible light sensor to avoid playing sounds at night. Connected to an ADC pin&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;board-assembly&quot;&gt;Board assembly:&lt;/h5&gt;

&lt;p&gt;Rpi Pico, speaker, light sensor, and clock contacts could be soldered directly to the PCB to get a very small height profile, or add pin headers and female sockets for a more flexible option.&lt;/p&gt;

&lt;p&gt;The single sided board can be etched at home. There are some free gpio pads for experimentation and also mounting holes near the corners&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/SINSONTE_BOARD_HOMEMADE.jpg&quot;&gt; &lt;img src=&quot;/assets/images/SINSONTE_BOARD_HOMEMADE_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/SINSONTE_BOARD_NOCONNECTOR.jpg&quot;&gt; &lt;img src=&quot;/assets/images/SINSONTE_BOARD_NOCONNECTOR_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/SINSONTE_BOARD_WITHCONNECTORS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/SINSONTE_BOARD_WITHCONNECTORS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Home etched board, direct soldering example and finished with connector headers.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;To build the wall clock, choose a plate or disk made of plastic or wood, with enough diameter to hide the clock movement and the sound board. Fix all electronic components and then decorative accessories like LED lights. Finish it with the paint work&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_MECHANISM.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_MECHANISM_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_COMPONENTS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_COMPONENTS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_BACK.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_BACK_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_FRONT.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_FRONT_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;clock movement with external contacts, decorative elements, finished back and finished front&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;For hour adjustment, remove all batteries and clock hands (hour, minute, second). Slowly turn clock adjustment knob until a “click” sound is heard. Put all clock hands pointing to 12 O’clock. Put the batteries. Sounds can be shifted pressing the momentary push button switch on the board.&lt;/p&gt;

&lt;h4 id=&quot;bill-of-materials&quot;&gt;Bill of materials&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;Get yours!&lt;/th&gt;
      &lt;th&gt;Datasheet&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Female header 2.54mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eNNciZ&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/FHA3-S1XX.pdf&quot;&gt;FHA3-S1XX.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Male pin header 2.54mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eMCUJv&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/PHA1-S3XX.pdf&quot;&gt;PHA1-S3XX.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1/4W 1% TH Resistors&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eMCbH1&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/MGR-SERIES.pdf&quot;&gt;MGR-SERIES.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Push button 6x6mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eKd4YV&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/TS-1301.pdf&quot;&gt;TS-1301.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Raspberry Pi Pico&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AXStdl&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/pico-datasheet.pdf&quot;&gt;pico-datasheet.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2xAA battery holder for PCB&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AoI96B&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/Comfortable_Catalog.pdf&quot;&gt;Comfortable_Catalog.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8 Ohm speaker 29 mm 0.25W&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_ATihaX&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/DXP29W-A.pdf&quot;&gt;DXP29W-A.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MOSFET 2N7000&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9j8Bgx&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/NDS7002A-D.pdf&quot;&gt;NDS7002A-D.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;NPN BIPOLAR TRANSISTOR 2N2222A&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_ANvtiX&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/P2N2222A-D.pdf&quot;&gt;P2N2222A-D.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;TH Radial Electrolytic Capacitor&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9gn4vh&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/TS13DE-CD110X.pdf&quot;&gt;TS13DE-CD110X.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;TH Ceramic Disc Capacitor&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_Apm6Pd&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/TS15.pdf&quot;&gt;TS15.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Quartz clock movement with trigger&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AfCGIL&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/12888SE_TRIGGER_CLOCK_MOVEMENT.pdf&quot;&gt;12888SE_TRIGGER_CLOCK_MOVEMENT.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Wall Clock hooks DIY&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_A0tg3V&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/wall_clock_hook.pdf&quot;&gt;wall_clock_hook.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;TEPT5700 visible light photodiode&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AM6wDK&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/tept5700.pdf&quot;&gt;tept5700.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;LED Copper Wire with battery box&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9vylbl&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/LED_Copper_Wire_Battery_Box.pdf&quot;&gt;LED_Copper_Wire_Battery_Box.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;circuit-board&quot;&gt;Circuit board&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;PCB&lt;/th&gt;
      &lt;th&gt;Source files&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Sound board (hardware directory)&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/SINSONTE&quot;&gt;SINSONTE&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;software-1&quot;&gt;Software&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Software&lt;/th&gt;
      &lt;th&gt;Source files&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Firmware CircuitPython &amp;amp; SDK C/C++ (software folder)&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/SINSONTE&quot;&gt;SINSONTE&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;optional-components&quot;&gt;Optional components:&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;Get yours!&lt;/th&gt;
      &lt;th&gt;Datasheet&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;3 pc step drill bit 3-20 mm + centerpunch&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AalUrz&quot;&gt;shop now&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&quot;&gt;3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Editor</name></author><category term="english" /><category term="AN003" /><category term="RPI PICO" /><category term="C/C++ SDK" /><category term="CIRCUITPHYTON" /><summary type="html">Halloween talking clock that plays sounds every O’clock hour. Only a few external components (easy to source and solder) needed. The single side board could be manufactured at home. Very customizable project than involves multiple knowledge areas (STEAM): Electronics, programming, woodworking, arts, etc. Customized clock hanging on a wall Key component: Quartz clock movement with trigger Concept: A lot of musical wall clocks on the market lacks the possibility of change original sounds. A clock with that capability can be built with an embedded system. But which one to choose? Raspberry Pi Pico was chosen for the 3 following reasons: There’s no need to install software for initial firmware download Onboard memory 2 MegaBytes of flash can store some amount of sounds without requiring external memory Can be powered by 2xAA batteries without additional components Rpi Pico draws about 1.6 mA in it’s lowest power mode (deep sleep). Seems not much, but is too high for a battery powered circuit, because they will exhaust in around two months. For that reason an external power circuit that can shut off the board completely was added. After that, power consumption lowered to 70 uA, so batteries will last for a year. The Rpi Pico acts as sound storage and player. To show the time and generate an O’clock signal, a quartz clock movement with trigger was used. Combining these 2 elements a talking sound clock was born Key features: Two versions of the (almost) same application: One developed in CircuitPython and the other in the C/C++ SDK. Compatible with the most common operating systems. No need to install apps for initial firmware download There’s no need to recompile code (in the app developed in CircuitPython) to change sounds Up to 3 years in standby mode using a pair of AA batteries. Easy to source, and solder components. Simplified diagram of the power circuit Software: Right after power on, Rpi Pico puts a low level on the GPIO that is wired to the power circuit to keep it powered, then decides which file should be played, and after the sound finishes, a high level is put on the GPIO powering off the Pico. Additionally a light sensor is read to not play sound when is dark (night). Sound files are played sequentially, one by one on each power on. A pointer to the next file is stored in nonvolatile memory, be carefully modifying the program to keep writing at a minimum. PECULIARITIES OF THE SDK C/C++ VERSION: Sounds to be played must be converted first to WAV format 16 bit mono @ 44100 Hz, then converted to C arrays[] before compiling. The application uses a PWM via digital output and interrupts to play sounds. The program execution starts almost immediately after power on. The main disadvantage of the application for now, it only supports .WAV files which are big, and cannot be changed without recompiling code PECULIARITIES OF THE CIRCUITPYTHON VERSION: Sounds to be played must be converted to MP3 mono format, The app uses audiomp3 and audiopwmio modules to output audio out of a digital pin (PWM). These files are stored in the filesystem provided by CP, so modifying them is straightforward, just drag and drop. MP3 files can store about 10 more sound time than WAV for the same file size, however CircuitPython runtime execution takes more than a second after power on, so probably it won’t be a good thing for any kind of final application Hardware: External components are part of one of the three different functionalities: On/Off : The circuit is made up by a MOSFET, Drain terminal connected to 3V3_EN and the Source terminal connected to GND. Connected to the gate are 2 elements: A capacitor to ground, and a resistor to V+. The circuit works in the following way: Step 1: Capacitor is fully charged, turning on the MOSFET and tying 3V3_EN to ground totally powering off Rpi Pico board Step 2: Capacitor is quickly discharged by the brief closure of the contacts of the clock movement, turning off the MOSFET, and powering on the Rpi Pico. The first thing to do after power up, is keeping the capacitor discharged with the aid of a GPIO output in low level. Step 3: While sound is played, low level on the GPIO is kept. Once sound finishes, GPIO output turned high level, so MOSFET turns on again, powering off the Rpi Pico until the next switch closure Audio amplifier: Single-stage, single NPN transistor powers a small 8 Ohm speaker. There is also an input RC low pass filter to smooth noise due to the PWM output. Day/night detection: Visible light sensor to avoid playing sounds at night. Connected to an ADC pin Board assembly: Rpi Pico, speaker, light sensor, and clock contacts could be soldered directly to the PCB to get a very small height profile, or add pin headers and female sockets for a more flexible option. The single sided board can be etched at home. There are some free gpio pads for experimentation and also mounting holes near the corners Home etched board, direct soldering example and finished with connector headers. To build the wall clock, choose a plate or disk made of plastic or wood, with enough diameter to hide the clock movement and the sound board. Fix all electronic components and then decorative accessories like LED lights. Finish it with the paint work clock movement with external contacts, decorative elements, finished back and finished front For hour adjustment, remove all batteries and clock hands (hour, minute, second). Slowly turn clock adjustment knob until a “click” sound is heard. Put all clock hands pointing to 12 O’clock. Put the batteries. Sounds can be shifted pressing the momentary push button switch on the board. Bill of materials Component Get yours! Datasheet Female header 2.54mm shop now FHA3-S1XX.pdf Male pin header 2.54mm shop now PHA1-S3XX.pdf 1/4W 1% TH Resistors shop now MGR-SERIES.pdf Push button 6x6mm shop now TS-1301.pdf Raspberry Pi Pico shop now pico-datasheet.pdf 2xAA battery holder for PCB shop now Comfortable_Catalog.pdf 8 Ohm speaker 29 mm 0.25W shop now DXP29W-A.pdf MOSFET 2N7000 shop now NDS7002A-D.pdf NPN BIPOLAR TRANSISTOR 2N2222A shop now P2N2222A-D.pdf TH Radial Electrolytic Capacitor shop now TS13DE-CD110X.pdf TH Ceramic Disc Capacitor shop now TS15.pdf Quartz clock movement with trigger shop now 12888SE_TRIGGER_CLOCK_MOVEMENT.pdf Wall Clock hooks DIY shop now wall_clock_hook.pdf TEPT5700 visible light photodiode shop now tept5700.pdf LED Copper Wire with battery box shop now LED_Copper_Wire_Battery_Box.pdf Circuit board PCB Source files Sound board (hardware directory) SINSONTE Software Software Source files Firmware CircuitPython &amp;amp; SDK C/C++ (software folder) SINSONTE Optional components: Component Get yours! Datasheet 3 pc step drill bit 3-20 mm + centerpunch shop now 3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf</summary></entry><entry><title type="html">Reloj sonoro para halloween basado en Rpi Pico</title><link href="https://galopago.github.io/espanol/reloj-sonidos-halloween-basado-en-rpi-pico/" rel="alternate" type="text/html" title="Reloj sonoro para halloween basado en Rpi Pico" /><published>2021-10-21T00:00:00-05:00</published><updated>2021-10-21T00:00:00-05:00</updated><id>https://galopago.github.io/espanol/reloj-sonidos-halloween-basado-en-rpi-pico</id><content type="html" xml:base="https://galopago.github.io/espanol/reloj-sonidos-halloween-basado-en-rpi-pico/">&lt;p&gt;Reloj con sonidos de halloween que son reproducidos cada hora en punto. Requiere pocos componentes externos, los cuales son faciles de conseguir y de soldar. La tarjeta de circuito impreso es de una sola cara y puede hacerse de forma casera. Proyecto bastante personalizable y que involucra multiples areas (&lt;a href=&quot;https://es.wikipedia.org/wiki/STEAM&quot;&gt;STEAM&lt;/a&gt;):Montaje electronico, programacion, carpinteria, arte, manualidades, etc.&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Reloj personalizado instalado en la pared&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p class=&quot;notice--danger&quot;&gt;Componente clave: &lt;a href=&quot;https://s.click.aliexpress.com/e/_ABHS4B&quot;&gt;Maquinaria para reloj de pared con contacto externo&lt;/a&gt;&lt;/p&gt;

&lt;h5 id=&quot;el-concepto&quot;&gt;El concepto:&lt;/h5&gt;

&lt;p&gt;La gran mayoria de los relojes de pared musicales que se encuentran en el mercado vienen con sonidos que no pueden ser cambiados ni modificados. Esto podria solucionarse con infinidad de microcontroladores y/o sistemas embebidos que hay actualmente en el mercado. Como la idea del proyecto es hacer que sea lo mas facil posible modificar los sonidos, el proyecto se decanto por el Raspberry Pi Pico por 3 razones principalmente:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;No se requiere instalar &lt;strong&gt;ninguna&lt;/strong&gt; aplicacion ni driver para descargar el firmware.&lt;/li&gt;
  &lt;li&gt;La tarjeta cuenta con 2 MegaBytes de memoria flash, por lo tanto se podrian grabar algunos sonidos en dicha memoria sin necesitar hardware adicional como memorias SPI o Micro SD.&lt;/li&gt;
  &lt;li&gt;La alimentacion se puede hacer mediante dos baterias AA directamente sin requerir componentes adicionales!&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;La tarjeta Raspberry Pi Pico, tiene un consumo aproximado de 1.6 mA en su rango mas bajo (en modo sueño profundo). Aunque parece poco, es demasiado alto para un circuito alimentado con baterias AA, pues estas se descargarian aproximadamente en 2 meses. Por esta razon fue necesario agregar un circuito externo que apagara totalmente la tarjeta, cayendo el consumo a 70 uA aproximadamente, lo cual le otorgaria una autonomia de un año mas o menos.&lt;/p&gt;

&lt;p&gt;La funcionalidad principal del Raspberry Pi Pico es almacenar archivos de sonido y reproducirlos. Para mostrar las horas y generar una señal cada hora en punto, se usa una maquinaria de reloj de pared que tiene una salida de contacto. Combinando estos 2 elementos se obtiene el reloj que reproduce sonidos cada hora en punto!&lt;/p&gt;

&lt;h4 id=&quot;principales-caracteristicas&quot;&gt;Principales Caracteristicas:&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;Se han desarrollado 2 versiones que hacen practicamente lo mismo: una en &lt;a href=&quot;https://learn.adafruit.com/bienvenido-a-circuitpython-2/que-es-circuitpython&quot;&gt;CircuitPython&lt;/a&gt; y la otra en el &lt;a href=&quot;https://github.com/raspberrypi/pico-sdk&quot;&gt;SDK de C/C++&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Compatible con los sistemas operativos mas conocidos.&lt;/li&gt;
  &lt;li&gt;No se requiere instalar ninguna aplicacion para descargar el Firmware inicial.&lt;/li&gt;
  &lt;li&gt;La modificacion de los sonidos (en la version CircuitPython) no requiere recompilar codigo.&lt;/li&gt;
  &lt;li&gt;Hasta 3 años de duracion de las baterias AA en modo espera.&lt;/li&gt;
  &lt;li&gt;Componentes muy faciles de conseguir y ensamblar.&lt;/li&gt;
&lt;/ul&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/rpi_pico_sound_clock.png&quot;&gt; &lt;img src=&quot;/assets/images/rpi_pico_sound_clock.png&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Diagrama simplificado del sistema encendido/apagado&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h5 id=&quot;el-programa&quot;&gt;El programa:&lt;/h5&gt;

&lt;p&gt;Al encenderse el Rpi Pico lo primero que este hace es poner en nivel bajo el GPIO que esta conectado al circuito de encendido para mantenerlo enganchado, luego determina cual debe ser el archivo a reproducir y al final de la reproducion pone el GPIO del circuito de encendido en nivel alto con lo que hace que el sistema se apague totalmente. Adicionalmente se cuenta con un sensor de luz conectado a una entrada analoga para determinar si es de noche y no reproducir sonidos.&lt;/p&gt;

&lt;p&gt;Los archivos se reproducen en forma secuencial, uno a uno con cada encendido de la tarjeta, y para poder guardar la informacion del proximo archivo a reproducir se usa la memoria no volatil, asi que se debera ser cuidadoso al modificar el programa para evitar desgastes acelerados!&lt;/p&gt;

&lt;h6 id=&quot;particularidades-de-la-version-en-sdk-cc&quot;&gt;PARTICULARIDADES DE LA VERSION EN SDK C/C++:&lt;/h6&gt;

&lt;p&gt;Los sonidos a reproducir deberan ser convertidos a formato .WAV 16 bit monofonicos a 44100 Hz. Una vez hecho esto, se deberan procesar para generar archivos .h que contendran arrays[] de C e incluirlos en el codigo antes de compilar. El programa usa una salida digital mediante PWM e interrupciones para la reproduccion de los sonidos.&lt;/p&gt;

&lt;p&gt;La principal virtud es que la ejecucion es inmediata al encender la tarjeta. La principal desventaja es que por ahora solo reproduce archivos .WAV que consumen bastante memoria, y para cambiarlos se requiere recompilar el programa.&lt;/p&gt;

&lt;h6 id=&quot;particularidades-de-la-version-en-circuitpython&quot;&gt;PARTICULARIDADES DE LA VERSION EN CIRCUITPYTHON:&lt;/h6&gt;

&lt;p&gt;Los sonidos a reproducir deberan ser convertidos a formato .MP3 monofonicos. El programa usa los modulos audiopwmio y audiomp3 para la reproduccion de los archivos, que son leidos desde el sistema de archivos que viene incorporado. simplemente descargarlos al Rpi Pico y listo!&lt;/p&gt;

&lt;p&gt;La principal virtud es la facilidad para cambiar los archivos de sonido: solo hay que arrastrar los nuevos archivos y reemplazar los actuales, ademas por ser en formato MP3 se puede almacenar unas 10 veces mas tiempo de sonido que en formato WAV. La principal desventaja es que la tarjeta toma algo mas de un segundo en ejecutar el codigo despues de encenderse, esto podria ser inadmisible en algunas aplicaciones.&lt;/p&gt;

&lt;h5 id=&quot;el-circuito&quot;&gt;El circuito:&lt;/h5&gt;
&lt;p&gt;Los componentes externos adicionales al Rpi Pico componen tres diferentes funcionalidades:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Encendido/Apagado&lt;/strong&gt;: El circuito esta compuesto principalmente por un MOSFET, el Drain se conecta a la señal 3V3_EN y el source a GND. En la compuerta hay 2 elementos un capacitor conectado a tierra y una resistencia conectada a V+. Este circuito funciona en 3 pasos que se repiten ciclicamente:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Paso 1: El condensador esta totalmente cargado, haciendo que el MOSFET entre en conduccion, llevando la señal 3V3_EN a tierra y apagando completamente la tarjeta.&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Paso 2: El condensador se descarga rapidamente mediante un pulsador o señal de contacto proveniente de la maquinaria del reloj, haciendo que momentaneamente el MOSFET entre en estado de no conduccion y se encienda la tarjeta. Al encenderse la tarjeta, lo primero que hace el programa es mantener dicho condensador descargado mediante un GPIO que pone en nivel bajo&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;paso 3: La tarjeta mantendra el nivel bajo del GPIO durante la ejecucion del sonido. Al finalizar pondra dicho GPIO en nivel alto, haciendo que el condensador se cargue rapidamente y que el MOSFET entre en conducion y se apague la tarjeta. La tarjeta quedara apagada totalmente hasta una nueva pulsacion.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Amplificador de audio&lt;/strong&gt;: Consta de una sola etapa, mediante un unico transistor NPN conectado a una bocina de 8 Ohm. Posee una etapa previa de filtrado mediante condensador y resistencia, para evitar posible ruido de la salida digital PWM&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Deteccion dia/noche&lt;/strong&gt;: Sensor de luz para determinar si los sonidos deben reproducirse ( en el dia ) o no se deben reproducir ( noche ), esto para evitar ruidos molestor a la madrugada!&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;ensamblaje&quot;&gt;Ensamblaje:&lt;/h5&gt;

&lt;p&gt;El Rpi Pico puede ser soldado directamente a la tarjeta de circuito impreso, con lo cual se obtendra un conjunto de poca altura, o se podran soldar pines tipo header al Rpi Pico y conector hembra en la PCB para lograr un sistema flexible donde se puede extraer el Pico a voluntad. Todos los demas componentes no representan mucho problema, pues son de montaje Thru-hole. Finalmente la bocina, el sensor de luz y el interruptor de reloj podrian montarse mediante conectores para poder removerlos a voluntad, o directamente los cables al PCB para mayor ahorro de espacio.&lt;/p&gt;

&lt;p&gt;El diseño de la tarjeta es de una sola capa y puede hacerse de forma casera en caso de ser necesario. Se han dejado pads libres para conexion a la mayoria de los GPIO del Rpi Pico, con lo cual se puede expandir sin mucho esfuerzo.&lt;/p&gt;

&lt;p&gt;La tarjeta cuenta con 4 orificios para montaje, donde puede ser sujetada a la parte trasera del reloj de pared&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/SINSONTE_BOARD_HOMEMADE.jpg&quot;&gt; &lt;img src=&quot;/assets/images/SINSONTE_BOARD_HOMEMADE_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/SINSONTE_BOARD_NOCONNECTOR.jpg&quot;&gt; &lt;img src=&quot;/assets/images/SINSONTE_BOARD_NOCONNECTOR_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/SINSONTE_BOARD_WITHCONNECTORS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/SINSONTE_BOARD_WITHCONNECTORS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Tarjeta casera, ejemplo de montaje directo y finalizada con conectores.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Para la construccion del reloj se debe escoger un disco, o plato, que puede ser de madera o plastico lo suficientemente grande para que pueda ubicarse la maquinaria del reloj y la tarjeta reproductora de los sonidos. Se debera realizar la fijacion de los elementos electronicos, seguido a esto se pueden agregar algunos accesorios como luces led y finalmente se realiza el trabajo artistico.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_MECHANISM.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_MECHANISM_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_COMPONENTS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_COMPONENTS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_BACK.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_BACK_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_FRONT.jpg&quot;&gt; &lt;img src=&quot;/assets/images/HALLOWEEN_TALKING_CLOCK_FRONT_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Mecanismo con salida externa, elementos decorativos, finalizado por atras y finalizado de frente&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Para ajustar la hora, se deben retirar las baterias y todas las manecillas (horario, minutero y segundero). Girar muy lentamente la perilla de ajuste del mecanismo de reloj hasta escuchar un “click”. En ese momento poner todas las manecillas apuntando a las 12. Poner las baterias. Al presionar el interruptor pulsador de la tarjeta se puede “avanzar” sonidos una hora con cada pulsacion.&lt;/p&gt;

&lt;h4 id=&quot;listado-de-materiales&quot;&gt;Listado de materiales&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Componente&lt;/th&gt;
      &lt;th&gt;Consigue el tuyo!&lt;/th&gt;
      &lt;th&gt;Hoja de caracteristicas&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Conector de hilera de pines hembra 2.54mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eNYVzN&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/FHA3-S1XX.pdf&quot;&gt;FHA3-S1XX.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Conector de hilera de pines macho 2.54mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eP34IL&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/PHA1-S3XX.pdf&quot;&gt;PHA1-S3XX.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Resistencias TH 1/4W 1%&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_etm4gJ&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/MGR-SERIES.pdf&quot;&gt;MGR-SERIES.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Interruptor momentaneo pulsador 6x6mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_etiG5l&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/TS-1301.pdf&quot;&gt;TS-1301.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Raspberry Pi Pico&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9yrTG7&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/pico-datasheet.pdf&quot;&gt;pico-datasheet.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Soporte para bateria AA para montaje en PCB&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_Anq4sJ&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/Comfortable_Catalog.pdf&quot;&gt;Comfortable_Catalog.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Bocina 8 Ohm 29 mm 0.25W&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_A4pgQL&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/DXP29W-A.pdf&quot;&gt;DXP29W-A.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;MOSFET 2N7000&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9h3XmP&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/NDS7002A-D.pdf&quot;&gt;NDS7002A-D.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Transistor bipolar NPN 2N2222A&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_A1K2OF&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/P2N2222A-D.pdf&quot;&gt;P2N2222A-D.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Capacitor TH electrolitico&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9J9jbZ&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/TS13DE-CD110X.pdf&quot;&gt;TS13DE-CD110X.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Capacitor TH Ceramico de disco&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9wCjd9&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/TS15.pdf&quot;&gt;TS15.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Maquinaria de reloj de pared con contacto externa&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_ABHS4B&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/12888SE_TRIGGER_CLOCK_MOVEMENT.pdf&quot;&gt;12888SE_TRIGGER_CLOCK_MOVEMENT.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Gancho para colgar reloj en pared&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AT8Uph&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/wall_clock_hook.pdf&quot;&gt;wall_clock_hook.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Fotodiodo de luz visible TEPT5700&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AKnaIM&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/tept5700.pdf&quot;&gt;tept5700.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tira de alambre coblre con LED y caja de bateria&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AChdbd&quot;&gt;lo quiero comprar&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/LED_Copper_Wire_Battery_Box.pdf&quot;&gt;LED_Copper_Wire_Battery_Box.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;circuito-impreso&quot;&gt;Circuito impreso&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;PCB&lt;/th&gt;
      &lt;th&gt;Archivos fuente&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Tarjeta de reproduccion de sonido (carpeta hardware)&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/SINSONTE&quot;&gt;SINSONTE&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;software&quot;&gt;Software&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Software&lt;/th&gt;
      &lt;th&gt;Archivos fuente&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Firmware en CircuitPython &amp;amp; SDK C/C++ (carpeta software)&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/SINSONTE&quot;&gt;SINSONTE&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;componentes-opcionales&quot;&gt;Componentes opcionales:&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Componente&lt;/th&gt;
      &lt;th&gt;Consigue el tuyo!&lt;/th&gt;
      &lt;th&gt;Hoja de caracteristicas&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Juego de 3 brocas escalonadas 3-20 mm + centropunto&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AalUrz&quot;&gt;compralo aqui&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&quot;&gt;3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Editor</name></author><category term="espanol" /><category term="AN003" /><category term="RPI PICO" /><category term="C/C++ SDK" /><category term="CIRCUITPHYTON" /><summary type="html">Reloj con sonidos de halloween que son reproducidos cada hora en punto. Requiere pocos componentes externos, los cuales son faciles de conseguir y de soldar. La tarjeta de circuito impreso es de una sola cara y puede hacerse de forma casera. Proyecto bastante personalizable y que involucra multiples areas (STEAM):Montaje electronico, programacion, carpinteria, arte, manualidades, etc. Reloj personalizado instalado en la pared Componente clave: Maquinaria para reloj de pared con contacto externo El concepto: La gran mayoria de los relojes de pared musicales que se encuentran en el mercado vienen con sonidos que no pueden ser cambiados ni modificados. Esto podria solucionarse con infinidad de microcontroladores y/o sistemas embebidos que hay actualmente en el mercado. Como la idea del proyecto es hacer que sea lo mas facil posible modificar los sonidos, el proyecto se decanto por el Raspberry Pi Pico por 3 razones principalmente: No se requiere instalar ninguna aplicacion ni driver para descargar el firmware. La tarjeta cuenta con 2 MegaBytes de memoria flash, por lo tanto se podrian grabar algunos sonidos en dicha memoria sin necesitar hardware adicional como memorias SPI o Micro SD. La alimentacion se puede hacer mediante dos baterias AA directamente sin requerir componentes adicionales! La tarjeta Raspberry Pi Pico, tiene un consumo aproximado de 1.6 mA en su rango mas bajo (en modo sueño profundo). Aunque parece poco, es demasiado alto para un circuito alimentado con baterias AA, pues estas se descargarian aproximadamente en 2 meses. Por esta razon fue necesario agregar un circuito externo que apagara totalmente la tarjeta, cayendo el consumo a 70 uA aproximadamente, lo cual le otorgaria una autonomia de un año mas o menos. La funcionalidad principal del Raspberry Pi Pico es almacenar archivos de sonido y reproducirlos. Para mostrar las horas y generar una señal cada hora en punto, se usa una maquinaria de reloj de pared que tiene una salida de contacto. Combinando estos 2 elementos se obtiene el reloj que reproduce sonidos cada hora en punto! Principales Caracteristicas: Se han desarrollado 2 versiones que hacen practicamente lo mismo: una en CircuitPython y la otra en el SDK de C/C++. Compatible con los sistemas operativos mas conocidos. No se requiere instalar ninguna aplicacion para descargar el Firmware inicial. La modificacion de los sonidos (en la version CircuitPython) no requiere recompilar codigo. Hasta 3 años de duracion de las baterias AA en modo espera. Componentes muy faciles de conseguir y ensamblar. Diagrama simplificado del sistema encendido/apagado El programa: Al encenderse el Rpi Pico lo primero que este hace es poner en nivel bajo el GPIO que esta conectado al circuito de encendido para mantenerlo enganchado, luego determina cual debe ser el archivo a reproducir y al final de la reproducion pone el GPIO del circuito de encendido en nivel alto con lo que hace que el sistema se apague totalmente. Adicionalmente se cuenta con un sensor de luz conectado a una entrada analoga para determinar si es de noche y no reproducir sonidos. Los archivos se reproducen en forma secuencial, uno a uno con cada encendido de la tarjeta, y para poder guardar la informacion del proximo archivo a reproducir se usa la memoria no volatil, asi que se debera ser cuidadoso al modificar el programa para evitar desgastes acelerados! PARTICULARIDADES DE LA VERSION EN SDK C/C++: Los sonidos a reproducir deberan ser convertidos a formato .WAV 16 bit monofonicos a 44100 Hz. Una vez hecho esto, se deberan procesar para generar archivos .h que contendran arrays[] de C e incluirlos en el codigo antes de compilar. El programa usa una salida digital mediante PWM e interrupciones para la reproduccion de los sonidos. La principal virtud es que la ejecucion es inmediata al encender la tarjeta. La principal desventaja es que por ahora solo reproduce archivos .WAV que consumen bastante memoria, y para cambiarlos se requiere recompilar el programa. PARTICULARIDADES DE LA VERSION EN CIRCUITPYTHON: Los sonidos a reproducir deberan ser convertidos a formato .MP3 monofonicos. El programa usa los modulos audiopwmio y audiomp3 para la reproduccion de los archivos, que son leidos desde el sistema de archivos que viene incorporado. simplemente descargarlos al Rpi Pico y listo! La principal virtud es la facilidad para cambiar los archivos de sonido: solo hay que arrastrar los nuevos archivos y reemplazar los actuales, ademas por ser en formato MP3 se puede almacenar unas 10 veces mas tiempo de sonido que en formato WAV. La principal desventaja es que la tarjeta toma algo mas de un segundo en ejecutar el codigo despues de encenderse, esto podria ser inadmisible en algunas aplicaciones. El circuito: Los componentes externos adicionales al Rpi Pico componen tres diferentes funcionalidades: Encendido/Apagado: El circuito esta compuesto principalmente por un MOSFET, el Drain se conecta a la señal 3V3_EN y el source a GND. En la compuerta hay 2 elementos un capacitor conectado a tierra y una resistencia conectada a V+. Este circuito funciona en 3 pasos que se repiten ciclicamente: Paso 1: El condensador esta totalmente cargado, haciendo que el MOSFET entre en conduccion, llevando la señal 3V3_EN a tierra y apagando completamente la tarjeta. Paso 2: El condensador se descarga rapidamente mediante un pulsador o señal de contacto proveniente de la maquinaria del reloj, haciendo que momentaneamente el MOSFET entre en estado de no conduccion y se encienda la tarjeta. Al encenderse la tarjeta, lo primero que hace el programa es mantener dicho condensador descargado mediante un GPIO que pone en nivel bajo paso 3: La tarjeta mantendra el nivel bajo del GPIO durante la ejecucion del sonido. Al finalizar pondra dicho GPIO en nivel alto, haciendo que el condensador se cargue rapidamente y que el MOSFET entre en conducion y se apague la tarjeta. La tarjeta quedara apagada totalmente hasta una nueva pulsacion. Amplificador de audio: Consta de una sola etapa, mediante un unico transistor NPN conectado a una bocina de 8 Ohm. Posee una etapa previa de filtrado mediante condensador y resistencia, para evitar posible ruido de la salida digital PWM Deteccion dia/noche: Sensor de luz para determinar si los sonidos deben reproducirse ( en el dia ) o no se deben reproducir ( noche ), esto para evitar ruidos molestor a la madrugada! Ensamblaje: El Rpi Pico puede ser soldado directamente a la tarjeta de circuito impreso, con lo cual se obtendra un conjunto de poca altura, o se podran soldar pines tipo header al Rpi Pico y conector hembra en la PCB para lograr un sistema flexible donde se puede extraer el Pico a voluntad. Todos los demas componentes no representan mucho problema, pues son de montaje Thru-hole. Finalmente la bocina, el sensor de luz y el interruptor de reloj podrian montarse mediante conectores para poder removerlos a voluntad, o directamente los cables al PCB para mayor ahorro de espacio. El diseño de la tarjeta es de una sola capa y puede hacerse de forma casera en caso de ser necesario. Se han dejado pads libres para conexion a la mayoria de los GPIO del Rpi Pico, con lo cual se puede expandir sin mucho esfuerzo. La tarjeta cuenta con 4 orificios para montaje, donde puede ser sujetada a la parte trasera del reloj de pared Tarjeta casera, ejemplo de montaje directo y finalizada con conectores. Para la construccion del reloj se debe escoger un disco, o plato, que puede ser de madera o plastico lo suficientemente grande para que pueda ubicarse la maquinaria del reloj y la tarjeta reproductora de los sonidos. Se debera realizar la fijacion de los elementos electronicos, seguido a esto se pueden agregar algunos accesorios como luces led y finalmente se realiza el trabajo artistico. Mecanismo con salida externa, elementos decorativos, finalizado por atras y finalizado de frente Para ajustar la hora, se deben retirar las baterias y todas las manecillas (horario, minutero y segundero). Girar muy lentamente la perilla de ajuste del mecanismo de reloj hasta escuchar un “click”. En ese momento poner todas las manecillas apuntando a las 12. Poner las baterias. Al presionar el interruptor pulsador de la tarjeta se puede “avanzar” sonidos una hora con cada pulsacion. Listado de materiales Componente Consigue el tuyo! Hoja de caracteristicas Conector de hilera de pines hembra 2.54mm lo quiero comprar FHA3-S1XX.pdf Conector de hilera de pines macho 2.54mm lo quiero comprar PHA1-S3XX.pdf Resistencias TH 1/4W 1% lo quiero comprar MGR-SERIES.pdf Interruptor momentaneo pulsador 6x6mm lo quiero comprar TS-1301.pdf Raspberry Pi Pico lo quiero comprar pico-datasheet.pdf Soporte para bateria AA para montaje en PCB lo quiero comprar Comfortable_Catalog.pdf Bocina 8 Ohm 29 mm 0.25W lo quiero comprar DXP29W-A.pdf MOSFET 2N7000 lo quiero comprar NDS7002A-D.pdf Transistor bipolar NPN 2N2222A lo quiero comprar P2N2222A-D.pdf Capacitor TH electrolitico lo quiero comprar TS13DE-CD110X.pdf Capacitor TH Ceramico de disco lo quiero comprar TS15.pdf Maquinaria de reloj de pared con contacto externa lo quiero comprar 12888SE_TRIGGER_CLOCK_MOVEMENT.pdf Gancho para colgar reloj en pared lo quiero comprar wall_clock_hook.pdf Fotodiodo de luz visible TEPT5700 lo quiero comprar tept5700.pdf Tira de alambre coblre con LED y caja de bateria lo quiero comprar LED_Copper_Wire_Battery_Box.pdf Circuito impreso PCB Archivos fuente Tarjeta de reproduccion de sonido (carpeta hardware) SINSONTE Software Software Archivos fuente Firmware en CircuitPython &amp;amp; SDK C/C++ (carpeta software) SINSONTE Componentes opcionales: Componente Consigue el tuyo! Hoja de caracteristicas Juego de 3 brocas escalonadas 3-20 mm + centropunto compralo aqui 3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf</summary></entry><entry><title type="html">Pedal USB basado en Rpi Pico</title><link href="https://galopago.github.io/espanol/pedal-usb-basado-en-rpi-pico/" rel="alternate" type="text/html" title="Pedal USB basado en Rpi Pico" /><published>2021-09-22T00:00:00-05:00</published><updated>2021-09-22T00:00:00-05:00</updated><id>https://galopago.github.io/espanol/pedal-usb-basado-en-rpi-pico</id><content type="html" xml:base="https://galopago.github.io/espanol/pedal-usb-basado-en-rpi-pico/">&lt;p&gt;Pedal USB (o cualquier otro interruptor momentaneo) que emula la pulsacion de teclas o combinaciones de teclas. Util para usar con aplicaciones de edicion de video para detener/reproducir sin tener que quitar las manos del teclado ni del raton, tambien puede usarse con aplicaciones de videoconferencia para hacer mute rapidamente. No se requiere ninguna aplicacion especial para descargar el firmware inicial, ni tampoco para configurar las teclas (un simple editor de texto bastara). Funciona practicamente con cualquier sistema operativo, incluso con dispositivos Android usando un adaptador USB OTG.&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_RPI_PICO.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_RPI_PICO_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Pedal USB instalado en una caja robusta&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p class=&quot;notice--danger&quot;&gt;Componente clave: &lt;a href=&quot;https://s.click.aliexpress.com/e/_9yrTG7&quot;&gt;Rpi Pico.&lt;/a&gt;&lt;/p&gt;

&lt;h5 id=&quot;el-concepto&quot;&gt;El concepto:&lt;/h5&gt;

&lt;p&gt;La gran mayoria de los pedales programables USB que se encuentran en el mercado poseen la gran desventaja de requerir instalar una aplicacion para poder ser configurados. Esta aplicacion la mayoria de las veces solo funciona en Windows y generalmente viene traducida a muy pocos idiomas(a veces no viene traducida!). Esto supone que para usuarios de Linux o Mac, se requiera instalar una maquina virtual para poder configurar dicho pedal, o pedir el favor a algun usuario de windows que nos ayude con esta tarea.&lt;/p&gt;

&lt;p&gt;Es aqui donde cobra importancia el &lt;a href=&quot;https://www.raspberrypi.org/products/raspberry-pi-pico/&quot;&gt;Raspberry Pi Pico&lt;/a&gt;, por 2 grandes razones: Tiene interfaz nativa USB, por lo que no se requiere de programador ni hardware adicional para descargar los programas y la mas importante aun es que soporta CircuitPython, por lo que se puede programar “en caliente” sin necesidad de estar permanentemente compilando y descargando firmware durante el proceso de depuracion. ¡Por lo tanto es el candidato perfecto para hacer nuestro propio pedal!&lt;/p&gt;

&lt;p&gt;Otra ventaja adicional con respecto a los pedales USB comerciales, es que el propio pedal, puede ser reemplazado facilmente por uno de mejor calidad o resistencia, pero conservando el circuito original. Tambien podria usarse otro tipo de interruptores diferentes para ser activados con partes del cuerpo diferentes a los pies. ¡La cantidad de interruptores que se le pueden adicionar solo esta determinada por los GPIO disponibles del Rpi Pico y por el tamaño de la caja!&lt;/p&gt;

&lt;p&gt;En cuanto al montaje fisico, se utilizo el sistema de prototipado de hardware &lt;a href=&quot;https://github.com/galopago/TUSISTEMITA&quot;&gt;TUSISTEMITA&lt;/a&gt; que proporciona una serie de  modulos y elementos pre construidos que permiten realizar un proyecto electronico sin necesidad de soldaduras, haciendolo facilmente modificable y flexible, pero a la vez robusto. Todo el conjunto va dentro de una caja a prueba de agua IP65, la cual le proporciona resistencia al polvo y al agua. Dicha caja ademas de proporcionarle un aspecto estetico “industrial”  tambien le otorga suficiente robustez mecanica para soportar uno que otro abuso. Los cables de conexiones electricas externas de la caja, fueron complementadas con accesorios para garantizar
el sellamiento IP65.&lt;/p&gt;

&lt;h4 id=&quot;principales-caracteristicas&quot;&gt;Principales Caracteristicas:&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;Desarrollado mediante CircuitPython, amigable y facil de entender&lt;/li&gt;
  &lt;li&gt;Compatible con los sistemas operativos mas conocidos&lt;/li&gt;
  &lt;li&gt;No se requiere instalar ninguna aplicacion para descargar el Firmware inicial&lt;/li&gt;
  &lt;li&gt;La configuracion de las teclas se realiza mediante la edicion de un archivo de texto&lt;/li&gt;
  &lt;li&gt;Resistente al agua y golpes.&lt;/li&gt;
  &lt;li&gt;Pedales reemplazables&lt;/li&gt;
  &lt;li&gt;Montaje realizado mediante el sistema de prototipado robusto para hardware electronico TUSISTEMITA&lt;/li&gt;
  &lt;li&gt;Alimentacion mediante puerto USB, no requiere fuente adicional.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;El hardware es bastante simple, solo se requiere el Rpi Pico y los interruptores conectados cada uno a un GPIO y a tierra. Se usan las resistencias de pull-up internas. La alimentacion y los datos llegan por el conector USB&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/rpi_pico_usb_keyboard.png&quot;&gt; &lt;img src=&quot;/assets/images/rpi_pico_usb_keyboard.png&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Diagrama simplificado de bloques&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h5 id=&quot;que-es-circuitpython&quot;&gt;Que es CircuitPython?:&lt;/h5&gt;
&lt;p&gt;Dicho en palabras de &lt;a href=&quot;https://learn.adafruit.com/bienvenido-a-circuitpython-2/que-es-circuitpython&quot;&gt;Industrias Adafruit&lt;/a&gt;, creadores de CircuitPython:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;es un lenguaje de programación diseñado para simplificar la experimentacion y aprendizaje de programar en microcontroladores de bajo costo. Hace el iniciar mas sencillo que nunca sin necesidad previa de descargar herramientas a la estación de trabajo. Una vez que tu tarjeta ha sido preparada, abres cualquier editor de texto, y puedes comenzar a escribir codigo. Es asi de simple.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Otras razones para usar CircuitPython incluyen:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Quieres tener tu ambiente listo para trabajar, en poco tiempo. Creas un archivo, editas tu codigo, salvas el archivo y se ejecuta de inmediato. No hay proceso de compilado, sin descargas ni subidas necesarias.&lt;/li&gt;
  &lt;li&gt;Eres nuevo en programacion. CircuitPython es diseñado pensando en educacion. Es sencillo comenzar a programar, y recibes retroalimentacion inmediata de la tarjeta.&lt;/li&gt;
  &lt;li&gt;Actualiza sencillamente tu codigo. Dado que tu codigo vive en la unidad de disco, puedes editarlo cuando gustes, y puedes mantener varios archivos con diferentes archivos para facil experimentacion.&lt;/li&gt;
  &lt;li&gt;La consola serial y REPL. Estas te permiten recibir retroalimentacion en vivo de tu codigo y programando de forma interactiva.&lt;/li&gt;
  &lt;li&gt;Almacenamiento de archivos. El almacenamiento interno de CircuitPython es un excelente lugar para bitacoras de datos, tocar archivos de audio o para interactuar con archivos.&lt;/li&gt;
  &lt;li&gt;Fuertes capacidades de hardware. Hay muchas bibliotecas y controladores para sensores, tarjetas especificas y otros componentes externos.&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;el-programa&quot;&gt;El programa:&lt;/h5&gt;

&lt;p&gt;El firmware presentado en este proyecto realiza dos tareas: Inicializar los GPIO dependiendo del archivo de configuracion y luego de esto un ciclo infinito estara verificando la pulsacion de cada interruptor para enviar el respectivo codigo de tecla. Se ha hecho uso de un antirebote por software para evitar falsas pulsaciones. Cada vez que se activa cualquiera de las entradas, se encendera el led incorporado en la tarjeta Rpi Pico&lt;/p&gt;

&lt;p&gt;El archivo de configuracion tiene una estructura muy simple, en donde esta escrito cuales son los GPIO a usar, que codigo de tecla enviara cuando dicho GPIO se active y adicionalmente que modificador de tecla se usara (por ejemplo SHIFT, CONTROL, ALT). En caso de no encontrarse el archivo de configuracion, el programa asumira unos valores por defecto. En dicho archivo no solo se puede modificar las teclas que se envian, sino que se pueden agregar tantos GPIO como se quiera, de esta forma se podrian tener 3 o 4 pedales.&lt;/p&gt;

&lt;h5 id=&quot;ensamblaje&quot;&gt;Ensamblaje:&lt;/h5&gt;

&lt;p&gt;El prototipo del sistema fue montado usando varios componentes de TUSISTEMITA, como la placa trasera para montaje, y la tarjeta de salida a terminales de tornillo para el Rpi Pico&lt;/p&gt;

&lt;p&gt;Una vez descargada la aplicacion por primera vez y comprobado que las conexiones electricas funcionan bien,
se puede pasar a la caja para montaje definitivo sin ningun traumatismo. Solamente hay que desconectar el puerto USB y las terminales de tornillo donde estan conectados los interruptores de prueba, fijar la placa a la caja y reconectar nuevamente.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_DEBUG.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_DEBUG_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_PARTS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_PARTS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_WIRED.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_WIRED_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Pruebas, ensamblaje y cableado.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Se escogio un conector USB tipo impresora, por ser uno de los mas robustos e intuitivos. El conector usado es del tipo para montaje en panel y
tiene 4 pines para soldar los cables (VCC,USB+,USB-,GND). Este conector se soldo a una extension Micro USB que conectara al Rpi Pico. Los pedales usan conectores tipo aviacion&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_AVIATION.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_AVIATION_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_PANEL.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_PANEL_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_PRINTER.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_PRINTER_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Conectores para pedales y computador&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Una vez cerrada la caja, las actualizaciones al programa pueden hacerse modificando el archivo de CircuitPython, o usando la interfaz interactiva. Si se requiere hacer una reinstalacion de CircuitPython o “formatear” el Rpi Pico, debera abrirse la caja para tener acceso al boton bootsel.&lt;/p&gt;

&lt;h4 id=&quot;listado-de-materiales&quot;&gt;Listado de materiales&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Componente&lt;/th&gt;
      &lt;th&gt;Consigue el tuyo!&lt;/th&gt;
      &lt;th&gt;Hoja de caracteristicas&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Tornillo M2.6 autorroscante tipo B&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_esHHyb&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/M2.6x5-6-8-12mm.pdf&quot;&gt;M2.6x5-6-8-12mm.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Espaciador separador de nylon G228&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AqHnWn&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/G228.pdf&quot;&gt;G228.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tubo termoencogible 2:1 multiples colores&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_Ar4Zmf&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/2_1_heatshrink_tube_colors.pdf&quot;&gt;2_1_heatshrink_tube_colors.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Caja estanca generica resistente al agua de 115x90x55 mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9y9UWZ&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/KH-F2.pdf&quot;&gt;KH-F2.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Raspberry Pi Pico&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9yrTG7&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/pico-datasheet.pdf&quot;&gt;pico-datasheet.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Conector USB Tipo B IP68 para panel&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_ATARh0&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/USB_TYPE_B_PANEL_MOUNT_CONNECTOR.pdf&quot;&gt;USB_TYPE_B_PANEL_MOUNT_CONNECTOR.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Conector de aviacion 4 pines&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9IMuVU&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/CIRCULAR_AVIATION_PANEL_CONNECTOR.pdf&quot;&gt;CIRCULAR_AVIATION_PANEL_CONNECTOR.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Interruptor momentaneo de pedal Metalico&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AktOC6&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/METAL_MOMENTARY_ELECTRIC_FOOT_SWITCH.pdf&quot;&gt;METAL_MOMENTARY_ELECTRIC_FOOT_SWITCH.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Cable de impresora USB tipo A&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_A596l4&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/USB_PRINTER_CABLE.pdf&quot;&gt;USB_PRINTER_CABLE.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Cable Micro USB&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AF0DcI&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/MICRO_USB_CABLE.pdf&quot;&gt;MICRO_USB_CABLE.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;componentes-tusistemita&quot;&gt;Componentes TUSISTEMITA&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;PCB&lt;/th&gt;
      &lt;th&gt;Archivos fuente&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Placa trasera para montaje A01 para caja de 158x90x60mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/A_BACKPLATES&quot;&gt;A01&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tarjeta breakout C11 con salida a terminales de tornillos para Rpi Pico&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/C_BREAKOUTS&quot;&gt;C11&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;software&quot;&gt;Software&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Software&lt;/th&gt;
      &lt;th&gt;Archivos fuente&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Firmware&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/RPI_PICO_USB_FOOT_SWITCH&quot;&gt;PEDAL_USB_RPI_PICO&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;componentes-opcionales&quot;&gt;Componentes opcionales:&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Componente&lt;/th&gt;
      &lt;th&gt;Consigue el tuyo!&lt;/th&gt;
      &lt;th&gt;Hoja de caracteristicas&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Juego de 3 brocas escalonadas 3-20 mm + centropunto&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AalUrz&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&quot;&gt;3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Broca escalonada de 8 pasos 10-45 mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_ATtnjt&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/8_steps_10-45mm_incremental_drill_bit.pdf&quot;&gt;8_steps_10-45mm_incremental_drill_bit.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Editor</name></author><category term="espanol" /><category term="AN002" /><category term="RPI PICO" /><category term="CIRCUITPYTHON" /><summary type="html">Pedal USB (o cualquier otro interruptor momentaneo) que emula la pulsacion de teclas o combinaciones de teclas. Util para usar con aplicaciones de edicion de video para detener/reproducir sin tener que quitar las manos del teclado ni del raton, tambien puede usarse con aplicaciones de videoconferencia para hacer mute rapidamente. No se requiere ninguna aplicacion especial para descargar el firmware inicial, ni tampoco para configurar las teclas (un simple editor de texto bastara). Funciona practicamente con cualquier sistema operativo, incluso con dispositivos Android usando un adaptador USB OTG. Pedal USB instalado en una caja robusta Componente clave: Rpi Pico. El concepto: La gran mayoria de los pedales programables USB que se encuentran en el mercado poseen la gran desventaja de requerir instalar una aplicacion para poder ser configurados. Esta aplicacion la mayoria de las veces solo funciona en Windows y generalmente viene traducida a muy pocos idiomas(a veces no viene traducida!). Esto supone que para usuarios de Linux o Mac, se requiera instalar una maquina virtual para poder configurar dicho pedal, o pedir el favor a algun usuario de windows que nos ayude con esta tarea. Es aqui donde cobra importancia el Raspberry Pi Pico, por 2 grandes razones: Tiene interfaz nativa USB, por lo que no se requiere de programador ni hardware adicional para descargar los programas y la mas importante aun es que soporta CircuitPython, por lo que se puede programar “en caliente” sin necesidad de estar permanentemente compilando y descargando firmware durante el proceso de depuracion. ¡Por lo tanto es el candidato perfecto para hacer nuestro propio pedal! Otra ventaja adicional con respecto a los pedales USB comerciales, es que el propio pedal, puede ser reemplazado facilmente por uno de mejor calidad o resistencia, pero conservando el circuito original. Tambien podria usarse otro tipo de interruptores diferentes para ser activados con partes del cuerpo diferentes a los pies. ¡La cantidad de interruptores que se le pueden adicionar solo esta determinada por los GPIO disponibles del Rpi Pico y por el tamaño de la caja! En cuanto al montaje fisico, se utilizo el sistema de prototipado de hardware TUSISTEMITA que proporciona una serie de modulos y elementos pre construidos que permiten realizar un proyecto electronico sin necesidad de soldaduras, haciendolo facilmente modificable y flexible, pero a la vez robusto. Todo el conjunto va dentro de una caja a prueba de agua IP65, la cual le proporciona resistencia al polvo y al agua. Dicha caja ademas de proporcionarle un aspecto estetico “industrial” tambien le otorga suficiente robustez mecanica para soportar uno que otro abuso. Los cables de conexiones electricas externas de la caja, fueron complementadas con accesorios para garantizar el sellamiento IP65. Principales Caracteristicas: Desarrollado mediante CircuitPython, amigable y facil de entender Compatible con los sistemas operativos mas conocidos No se requiere instalar ninguna aplicacion para descargar el Firmware inicial La configuracion de las teclas se realiza mediante la edicion de un archivo de texto Resistente al agua y golpes. Pedales reemplazables Montaje realizado mediante el sistema de prototipado robusto para hardware electronico TUSISTEMITA Alimentacion mediante puerto USB, no requiere fuente adicional. El hardware es bastante simple, solo se requiere el Rpi Pico y los interruptores conectados cada uno a un GPIO y a tierra. Se usan las resistencias de pull-up internas. La alimentacion y los datos llegan por el conector USB Diagrama simplificado de bloques Que es CircuitPython?: Dicho en palabras de Industrias Adafruit, creadores de CircuitPython: es un lenguaje de programación diseñado para simplificar la experimentacion y aprendizaje de programar en microcontroladores de bajo costo. Hace el iniciar mas sencillo que nunca sin necesidad previa de descargar herramientas a la estación de trabajo. Una vez que tu tarjeta ha sido preparada, abres cualquier editor de texto, y puedes comenzar a escribir codigo. Es asi de simple. Otras razones para usar CircuitPython incluyen: Quieres tener tu ambiente listo para trabajar, en poco tiempo. Creas un archivo, editas tu codigo, salvas el archivo y se ejecuta de inmediato. No hay proceso de compilado, sin descargas ni subidas necesarias. Eres nuevo en programacion. CircuitPython es diseñado pensando en educacion. Es sencillo comenzar a programar, y recibes retroalimentacion inmediata de la tarjeta. Actualiza sencillamente tu codigo. Dado que tu codigo vive en la unidad de disco, puedes editarlo cuando gustes, y puedes mantener varios archivos con diferentes archivos para facil experimentacion. La consola serial y REPL. Estas te permiten recibir retroalimentacion en vivo de tu codigo y programando de forma interactiva. Almacenamiento de archivos. El almacenamiento interno de CircuitPython es un excelente lugar para bitacoras de datos, tocar archivos de audio o para interactuar con archivos. Fuertes capacidades de hardware. Hay muchas bibliotecas y controladores para sensores, tarjetas especificas y otros componentes externos. El programa: El firmware presentado en este proyecto realiza dos tareas: Inicializar los GPIO dependiendo del archivo de configuracion y luego de esto un ciclo infinito estara verificando la pulsacion de cada interruptor para enviar el respectivo codigo de tecla. Se ha hecho uso de un antirebote por software para evitar falsas pulsaciones. Cada vez que se activa cualquiera de las entradas, se encendera el led incorporado en la tarjeta Rpi Pico El archivo de configuracion tiene una estructura muy simple, en donde esta escrito cuales son los GPIO a usar, que codigo de tecla enviara cuando dicho GPIO se active y adicionalmente que modificador de tecla se usara (por ejemplo SHIFT, CONTROL, ALT). En caso de no encontrarse el archivo de configuracion, el programa asumira unos valores por defecto. En dicho archivo no solo se puede modificar las teclas que se envian, sino que se pueden agregar tantos GPIO como se quiera, de esta forma se podrian tener 3 o 4 pedales. Ensamblaje: El prototipo del sistema fue montado usando varios componentes de TUSISTEMITA, como la placa trasera para montaje, y la tarjeta de salida a terminales de tornillo para el Rpi Pico Una vez descargada la aplicacion por primera vez y comprobado que las conexiones electricas funcionan bien, se puede pasar a la caja para montaje definitivo sin ningun traumatismo. Solamente hay que desconectar el puerto USB y las terminales de tornillo donde estan conectados los interruptores de prueba, fijar la placa a la caja y reconectar nuevamente. Pruebas, ensamblaje y cableado. Se escogio un conector USB tipo impresora, por ser uno de los mas robustos e intuitivos. El conector usado es del tipo para montaje en panel y tiene 4 pines para soldar los cables (VCC,USB+,USB-,GND). Este conector se soldo a una extension Micro USB que conectara al Rpi Pico. Los pedales usan conectores tipo aviacion Conectores para pedales y computador Una vez cerrada la caja, las actualizaciones al programa pueden hacerse modificando el archivo de CircuitPython, o usando la interfaz interactiva. Si se requiere hacer una reinstalacion de CircuitPython o “formatear” el Rpi Pico, debera abrirse la caja para tener acceso al boton bootsel. Listado de materiales Componente Consigue el tuyo! Hoja de caracteristicas Tornillo M2.6 autorroscante tipo B 💸 M2.6x5-6-8-12mm.pdf Espaciador separador de nylon G228 💸 G228.pdf Tubo termoencogible 2:1 multiples colores 💸 2_1_heatshrink_tube_colors.pdf Caja estanca generica resistente al agua de 115x90x55 mm 💸 KH-F2.pdf Raspberry Pi Pico 💸 pico-datasheet.pdf Conector USB Tipo B IP68 para panel 💸 USB_TYPE_B_PANEL_MOUNT_CONNECTOR.pdf Conector de aviacion 4 pines 💸 CIRCULAR_AVIATION_PANEL_CONNECTOR.pdf Interruptor momentaneo de pedal Metalico 💸 METAL_MOMENTARY_ELECTRIC_FOOT_SWITCH.pdf Cable de impresora USB tipo A 💸 USB_PRINTER_CABLE.pdf Cable Micro USB 💸 MICRO_USB_CABLE.pdf Componentes TUSISTEMITA PCB Archivos fuente Placa trasera para montaje A01 para caja de 158x90x60mm A01 Tarjeta breakout C11 con salida a terminales de tornillos para Rpi Pico C11 Software Software Archivos fuente Firmware PEDAL_USB_RPI_PICO Componentes opcionales: Componente Consigue el tuyo! Hoja de caracteristicas Juego de 3 brocas escalonadas 3-20 mm + centropunto 💸 3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf Broca escalonada de 8 pasos 10-45 mm 💸 8_steps_10-45mm_incremental_drill_bit.pdf</summary></entry><entry><title type="html">USB Pedal based on Rpi Pico</title><link href="https://galopago.github.io/english/usb-pedal-rpi-pico-based/" rel="alternate" type="text/html" title="USB Pedal based on Rpi Pico" /><published>2021-09-22T00:00:00-05:00</published><updated>2021-09-22T00:00:00-05:00</updated><id>https://galopago.github.io/english/usb-pedal-rpi-pico-based</id><content type="html" xml:base="https://galopago.github.io/english/usb-pedal-rpi-pico-based/">&lt;p&gt;USB pedals (or any other momentary switches) who emulates keyboard keypress or combination of keys. Handy to use with video edition software to pause/play without moving the hands away from the keyboard or mouse, it can also be used by videoconferencing software to mute quickly. There’s no need for special application to download initial firmware nor for keys setup (only a simple text editor needed). Works with almost any operating system, even with android devices using an OTG USB adapter.&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_RPI_PICO.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_RPI_PICO_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;USB Pedal circuit installed in a robust enclosure&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p class=&quot;notice--danger&quot;&gt;Key component: &lt;a href=&quot;https://s.click.aliexpress.com/e/_AXStdl&quot;&gt;Rpi Pico.&lt;/a&gt;&lt;/p&gt;

&lt;h5 id=&quot;concept&quot;&gt;Concept:&lt;/h5&gt;

&lt;p&gt;A lot of USB programmable pedals on the market need to install an application for configuration. Usually this app is only for Windows and came poorly translated (if translated at all). This is a pitfall for Linux or Mac users, who have only two options: To install a Windows virtual machine or ask a favor to a Windows user for pedal setup.&lt;/p&gt;

&lt;p&gt;Here come to the rescue &lt;a href=&quot;https://www.raspberrypi.org/products/raspberry-pi-pico/&quot;&gt;Raspberry Pi Pico&lt;/a&gt;, for two big reasons: USB native interface, so no programmer or additional hardware needed for firmware download and the most important: CircuitPython support. Programming could be “on the fly” without compiling-and-download during the debug phase. So Rpi Pico is the best candidate for a DIY pedal.&lt;/p&gt;

&lt;p&gt;Another additional advantage over commercial USB pedals, the pedal itself can be replaced for a more robust one, without touching the circuit. Another kind of switches could be used, so operation with different parts of the body is possible. The amount of switches to be installed is only limited by Rpi Pico GPIO pins and the space available on the enclosure.&lt;/p&gt;

&lt;p&gt;The circuit is built using &lt;a href=&quot;https://github.com/galopago/TUSISTEMITA&quot;&gt;TUSISTEMITA&lt;/a&gt; hardware prototyping system, which provides different kinds of prebuilt modules which allows to build an electronic project without soldering, but making it very robust and expandable. All the parts are enclosed in a dustproof and waterproof IP65 box. This enclosure gives an “industrial look” to the project and also adds mechanical strength to withstand abuses. The external electrical connections (pedals, and USB) were fitted with IP accessories to provide a good seal.&lt;/p&gt;

&lt;h4 id=&quot;key-features&quot;&gt;Key features:&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;Developed using CircuitPython, friendly and easy to learn&lt;/li&gt;
  &lt;li&gt;Compatible with the most common operating systems&lt;/li&gt;
  &lt;li&gt;No need to install apps for initial firmware download&lt;/li&gt;
  &lt;li&gt;Key configuration done in a text file&lt;/li&gt;
  &lt;li&gt;Splash resistant and shockproof&lt;/li&gt;
  &lt;li&gt;Detachable and replaceable pedals&lt;/li&gt;
  &lt;li&gt;Built using hardware prototyping system&lt;/li&gt;
  &lt;li&gt;Powered by USB, no additional power source needed&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The hardware is pretty simple, only requires a Rpi Pico and switches connected between GPIO and ground. Internal pull-up resistors used. Power and data via USB cable&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/rpi_pico_usb_keyboard.png&quot;&gt; &lt;img src=&quot;/assets/images/rpi_pico_usb_keyboard.png&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Simplified block diagram&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h5 id=&quot;what-is-circuitpython&quot;&gt;What is CircuitPython?:&lt;/h5&gt;
&lt;p&gt;In &lt;a href=&quot;https://learn.adafruit.com/bienvenido-a-circuitpython-2/que-es-circuitpython&quot;&gt;Adafruit Industres&lt;/a&gt; words, makers of CircuitPython:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;CircuitPython is a programming language designed to simplify experimenting and learning to program on low-cost microcontroller boards. It makes getting started easier than ever with no upfront desktop downloads needed. Once you get your board set up, open any text editor, and get started editing code. It’s that simple.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Other reasons to use CircuitPython include:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;You want to get up and running quickly. Create a file, edit your code, save the file, and it runs immediately. There is no compiling, no downloading and no uploading needed.&lt;/li&gt;
  &lt;li&gt;You’re new to programming. CircuitPython is designed with education in mind. It’s easy to start learning how to program and you get immediate feedback from the board.&lt;/li&gt;
  &lt;li&gt;Easily update your code. Since your code lives on the disk drive, you can edit it whenever you like, you can also keep multiple files around for easy experimentation.&lt;/li&gt;
  &lt;li&gt;The serial console and REPL. These allow for live feedback from your code and interactive programming.&lt;/li&gt;
  &lt;li&gt;File storage. The internal storage for CircuitPython makes it great for data-logging, playing audio clips, and otherwise interacting with files.&lt;/li&gt;
  &lt;li&gt;Strong hardware support. There are many libraries and drivers for sensors, breakout boards and other external components.&lt;/li&gt;
  &lt;li&gt;It’s Python! Python is the fastest-growing programming language. It’s taught in schools and universities. CircuitPython is almost-completely compatible with Python. It simply adds hardware support.&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;software&quot;&gt;Software:&lt;/h5&gt;

&lt;p&gt;Sample application presented here is composed of two tasks: Initialize GPIO according to the configuration file and then runs an endless loop verifying for switch closing to send its respective keycode. Software debouncing function was used to avoid false key press. Rpi Pico onboard LED lights when whatever configured switch closes.&lt;/p&gt;

&lt;p&gt;The configuration file structure is very simple. First line GPIOS to use, second line keycode to send, and third line modifier keycode (I.E SHIFT, CONTROL, ALT). If during initialization the config file isn’t found, the program will assume some default values. More GPIOS can be added to the config file, so 3, 4 or mode pedals could be plugged.&lt;/p&gt;

&lt;h5 id=&quot;circuit-assembly&quot;&gt;Circuit assembly:&lt;/h5&gt;

&lt;p&gt;The circuit was built using components of TUSISTEMITA, like enclosure backplate, and Rpi Pico screw terminal breakboard.&lt;/p&gt;

&lt;p&gt;Once the app is downloaded for the first time, and electrical connections verified, the backplate could be attached to the enclosure hassle free. Just unplug USB cable and debug switches’ screw terminals, screw backplate to enclosure and reconnect cables again.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_DEBUG.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_DEBUG_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_PARTS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_PARTS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_WIRED.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_WIRED_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Debug, wiring and assembly.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;USB printer connector (Type B) was chosen because is very robust and intuitive. This specific connector is designed for panel mounting and sports 4 metal pins (VCC,USB+,USB-,GND) that must be soldered to a Micro USB extension cable to plug to the Rpi Pico. Pedals use circular aviation connectors.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_AVIATION.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_AVIATION_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_PANEL.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_PANEL_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/USB_PEDAL_PICO_PRINTER.jpg&quot;&gt; &lt;img src=&quot;/assets/images/USB_PEDAL_PICO_PRINTER_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Connectors for computer and pedals&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Once the enclosure is closed, firmware updates could be done modifying the CircuitPython file, or via interactive environment. For a CircuitPython re-installation or Rpi Pico “format”, the enclosure must be open to access bootsel button.&lt;/p&gt;

&lt;h4 id=&quot;bill-of-materials&quot;&gt;Bill of materials&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;Get yours!&lt;/th&gt;
      &lt;th&gt;Datasheet&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;M2.6 self-tapping B-type screw&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eOJ3Kd&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/M2.6x5-6-8-12mm.pdf&quot;&gt;M2.6x5-6-8-12mm.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2:1 Heatshrink tube multiple colors&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9ikkU7&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/2_1_heatshrink_tube_colors.pdf&quot;&gt;2_1_heatshrink_tube_colors.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;115x90x55 mm enclosure box&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AFnqxL&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/KH-F3.pdf&quot;&gt;KH-F3.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Raspberry Pi Pico&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AXStdl&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/pico-datasheet.pdf&quot;&gt;pico-datasheet.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;USB Type B IP68 panel connector&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AbHdB8&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/USB_TYPE_B_PANEL_MOUNT_CONNECTOR.pdf&quot;&gt;USB_TYPE_B_PANEL_MOUNT_CONNECTOR.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4 pin aviation connector&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9yPVWE&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/CIRCULAR_AVIATION_PANEL_CONNECTOR.pdf&quot;&gt;CIRCULAR_AVIATION_PANEL_CONNECTOR.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Metal electric foot switch&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_97Yt4m&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/METAL_MOMENTARY_ELECTRIC_FOOT_SWITCH.pdf&quot;&gt;METAL_MOMENTARY_ELECTRIC_FOOT_SWITCH.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;USB printer cable A type&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_A1mCwQ&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/USB_PRINTER_CABLE.pdf&quot;&gt;USB_PRINTER_CABLE.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Micro USB cable&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_97vmPY&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/MICRO_USB_CABLE.pdf&quot;&gt;MICRO_USB_CABLE.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;tusistemita-blocks&quot;&gt;TUSISTEMITA blocks&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;PCB&lt;/th&gt;
      &lt;th&gt;Source file&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;A01 Backplate for 158x90x60mm enclosure&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/A_BACKPLATES&quot;&gt;A01&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;C11 screw terminal breakout board for Rpi Pico&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/C_BREAKOUTS&quot;&gt;C11&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;software-1&quot;&gt;Software&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Software&lt;/th&gt;
      &lt;th&gt;Source file&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Firmware&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/RPI_PICO_USB_FOOT_SWITCH&quot;&gt;PEDAL_USB_RPI_PICO&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;optional-components&quot;&gt;Optional components:&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;Get yours!&lt;/th&gt;
      &lt;th&gt;Datasheet&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;3 pc step drill bit 3-20 mm + centerpunch&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9vxJV5&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&quot;&gt;3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8 Step drill bit 10-45 mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9Ior51&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/8_steps_10-45mm_incremental_drill_bit.pdf&quot;&gt;8_steps_10-45mm_incremental_drill_bit.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Editor</name></author><category term="english" /><category term="AN002" /><category term="RPI PICO" /><category term="CIRCUITPYTHON" /><summary type="html">USB pedals (or any other momentary switches) who emulates keyboard keypress or combination of keys. Handy to use with video edition software to pause/play without moving the hands away from the keyboard or mouse, it can also be used by videoconferencing software to mute quickly. There’s no need for special application to download initial firmware nor for keys setup (only a simple text editor needed). Works with almost any operating system, even with android devices using an OTG USB adapter. USB Pedal circuit installed in a robust enclosure Key component: Rpi Pico. Concept: A lot of USB programmable pedals on the market need to install an application for configuration. Usually this app is only for Windows and came poorly translated (if translated at all). This is a pitfall for Linux or Mac users, who have only two options: To install a Windows virtual machine or ask a favor to a Windows user for pedal setup. Here come to the rescue Raspberry Pi Pico, for two big reasons: USB native interface, so no programmer or additional hardware needed for firmware download and the most important: CircuitPython support. Programming could be “on the fly” without compiling-and-download during the debug phase. So Rpi Pico is the best candidate for a DIY pedal. Another additional advantage over commercial USB pedals, the pedal itself can be replaced for a more robust one, without touching the circuit. Another kind of switches could be used, so operation with different parts of the body is possible. The amount of switches to be installed is only limited by Rpi Pico GPIO pins and the space available on the enclosure. The circuit is built using TUSISTEMITA hardware prototyping system, which provides different kinds of prebuilt modules which allows to build an electronic project without soldering, but making it very robust and expandable. All the parts are enclosed in a dustproof and waterproof IP65 box. This enclosure gives an “industrial look” to the project and also adds mechanical strength to withstand abuses. The external electrical connections (pedals, and USB) were fitted with IP accessories to provide a good seal. Key features: Developed using CircuitPython, friendly and easy to learn Compatible with the most common operating systems No need to install apps for initial firmware download Key configuration done in a text file Splash resistant and shockproof Detachable and replaceable pedals Built using hardware prototyping system Powered by USB, no additional power source needed The hardware is pretty simple, only requires a Rpi Pico and switches connected between GPIO and ground. Internal pull-up resistors used. Power and data via USB cable Simplified block diagram What is CircuitPython?: In Adafruit Industres words, makers of CircuitPython: CircuitPython is a programming language designed to simplify experimenting and learning to program on low-cost microcontroller boards. It makes getting started easier than ever with no upfront desktop downloads needed. Once you get your board set up, open any text editor, and get started editing code. It’s that simple. Other reasons to use CircuitPython include: You want to get up and running quickly. Create a file, edit your code, save the file, and it runs immediately. There is no compiling, no downloading and no uploading needed. You’re new to programming. CircuitPython is designed with education in mind. It’s easy to start learning how to program and you get immediate feedback from the board. Easily update your code. Since your code lives on the disk drive, you can edit it whenever you like, you can also keep multiple files around for easy experimentation. The serial console and REPL. These allow for live feedback from your code and interactive programming. File storage. The internal storage for CircuitPython makes it great for data-logging, playing audio clips, and otherwise interacting with files. Strong hardware support. There are many libraries and drivers for sensors, breakout boards and other external components. It’s Python! Python is the fastest-growing programming language. It’s taught in schools and universities. CircuitPython is almost-completely compatible with Python. It simply adds hardware support. Software: Sample application presented here is composed of two tasks: Initialize GPIO according to the configuration file and then runs an endless loop verifying for switch closing to send its respective keycode. Software debouncing function was used to avoid false key press. Rpi Pico onboard LED lights when whatever configured switch closes. The configuration file structure is very simple. First line GPIOS to use, second line keycode to send, and third line modifier keycode (I.E SHIFT, CONTROL, ALT). If during initialization the config file isn’t found, the program will assume some default values. More GPIOS can be added to the config file, so 3, 4 or mode pedals could be plugged. Circuit assembly: The circuit was built using components of TUSISTEMITA, like enclosure backplate, and Rpi Pico screw terminal breakboard. Once the app is downloaded for the first time, and electrical connections verified, the backplate could be attached to the enclosure hassle free. Just unplug USB cable and debug switches’ screw terminals, screw backplate to enclosure and reconnect cables again. Debug, wiring and assembly. USB printer connector (Type B) was chosen because is very robust and intuitive. This specific connector is designed for panel mounting and sports 4 metal pins (VCC,USB+,USB-,GND) that must be soldered to a Micro USB extension cable to plug to the Rpi Pico. Pedals use circular aviation connectors. Connectors for computer and pedals Once the enclosure is closed, firmware updates could be done modifying the CircuitPython file, or via interactive environment. For a CircuitPython re-installation or Rpi Pico “format”, the enclosure must be open to access bootsel button. Bill of materials Component Get yours! Datasheet M2.6 self-tapping B-type screw 💸 M2.6x5-6-8-12mm.pdf 2:1 Heatshrink tube multiple colors 💸 2_1_heatshrink_tube_colors.pdf 115x90x55 mm enclosure box 💸 KH-F3.pdf Raspberry Pi Pico 💸 pico-datasheet.pdf USB Type B IP68 panel connector 💸 USB_TYPE_B_PANEL_MOUNT_CONNECTOR.pdf 4 pin aviation connector 💸 CIRCULAR_AVIATION_PANEL_CONNECTOR.pdf Metal electric foot switch 💸 METAL_MOMENTARY_ELECTRIC_FOOT_SWITCH.pdf USB printer cable A type 💸 USB_PRINTER_CABLE.pdf Micro USB cable 💸 MICRO_USB_CABLE.pdf TUSISTEMITA blocks PCB Source file A01 Backplate for 158x90x60mm enclosure A01 C11 screw terminal breakout board for Rpi Pico C11 Software Software Source file Firmware PEDAL_USB_RPI_PICO Optional components: Component Get yours! Datasheet 3 pc step drill bit 3-20 mm + centerpunch 💸 3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf 8 Step drill bit 10-45 mm 💸 8_steps_10-45mm_incremental_drill_bit.pdf</summary></entry><entry><title type="html">WiFi controlled waterproof LED string</title><link href="https://galopago.github.io/english/WiFi-waterproof-led-string/" rel="alternate" type="text/html" title="WiFi controlled waterproof LED string" /><published>2021-01-20T00:00:00-05:00</published><updated>2021-01-20T00:00:00-05:00</updated><id>https://galopago.github.io/english/WiFi-waterproof-led-string</id><content type="html" xml:base="https://galopago.github.io/english/WiFi-waterproof-led-string/">&lt;p&gt;Decorative lights suitable for Halloween, Christmas, parties, etc. Not only controlled over internet but, also completely reprogrammed 
wirelessly using OTA over WiFi. Waterproof, dustproof and sturdy. Ideal for indoor projects like interactive backgrounds for youtubers/streamers
controlled by their audience and for outdoor projects like advertizing signs in walls or vehicles.&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_IOT_LIGHTS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_IOT_LIGHTS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Open enclosure showing internal components&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p class=&quot;notice--danger&quot;&gt;Key component: &lt;a href=&quot;https://s.click.aliexpress.com/e/_AWaLpZ&quot;&gt;WS2811 waterproof LED string.&lt;/a&gt;&lt;/p&gt;

&lt;h5 id=&quot;concept&quot;&gt;Concept:&lt;/h5&gt;

&lt;p&gt;With the advent of addressable LED like WS2812, WS2812b, WS2811, etc. is now possible for small microcontrollers to 
handle large amounts of LEDs with only one I/O pin. That advantage popularized this component and a lot of variants appeared: surface mount 
single leds, flexible strips, Christmas-like strings, etc. The last one will be used in this article due to its flexibility and strength and could adapt
easily to different project from Christmas ornaments to led matrix, without soldering or other electrical modifications.&lt;/p&gt;

&lt;p&gt;The microcontroller chosen was an ESP8266, more exactly a development board known as “NODEMCU V3” which has all additional components necessary to start work on
programming the MCU with a computer. The onboard WiFi of the ESP8266 is not only possible to to change light sequences, but also download a totally different
firmware wirelessly (OTA), using a powerful combo: &lt;a href=&quot;https://mongoose-os.com/&quot;&gt;Mongoose OS&lt;/a&gt; and its remote device management dashboard &lt;a href=&quot;https://mdash.net/&quot;&gt;mDASH&lt;/a&gt;.
Mongoose OS uses a scaled down version of JavaScript known as &lt;a href=&quot;https://github.com/cesanta/mjs&quot;&gt;mJS&lt;/a&gt;. This is an attractive language for web developers whom already 
work with JS. Mongoose OS is built on top of Espressif’s ESP-iDF, so it is possible to write functions in C, which is also attractive for more “traditional” embedded programmers.&lt;/p&gt;

&lt;p&gt;The circuit is built using &lt;a href=&quot;https://github.com/galopago/TUSISTEMITA&quot;&gt;TUSISTEMITA&lt;/a&gt; hardware prototyping system, which provides different kinds of prebuilt modules which allows
to build an electronic project without soldering, but making it very robust and expandable. All the parts are enclosed in a dustproof and waterproof IP65 box. This enclosure gives an
“industrial look” to the project and also adds mechanical strength to withstand abuses. The external electrical connections (AC, and LEDs) were fitted with IP accessories to provide
a good seal.&lt;/p&gt;

&lt;h4 id=&quot;key-features&quot;&gt;Key features:&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Mongoose OS embedded operating system running on ESP8266.&lt;/li&gt;
  &lt;li&gt;Dustproof, waterproof and wall mountable.&lt;/li&gt;
  &lt;li&gt;Wireless remote firmware update, thanks to Mongoose OS management dashboard mDASH.&lt;/li&gt;
  &lt;li&gt;Built with TUSISTEMITA hardware prototyping blocks&lt;/li&gt;
  &lt;li&gt;110/220V AC power&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The circuit is composed of 4 elements well differentiated: Power source, CPU, logic level shifter and LEDs. Power source is switched type, 20W power, 5V output and 110/220V input, so
it could be used in any country of the world. ESP8266 was used as CPU (NODEMCU V3). This board can be powered by 3.3V directly to processor power pin or by 5V using the
onboard regulator. The high logic level output of ESP8266 is 3.3V, so a logic level shifter is needed for working with 5V sensors. WS2812 works with 5V logic levels so TUSISTEMITA D06
logic level board converter was used. This board is based on BSS138 MOSFET.&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/mos_wifi_iot_lights_blockdiag.png&quot;&gt; &lt;img src=&quot;/assets/images/mos_wifi_iot_lights_blockdiag.png&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Simplified block diagram&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Power source output current is around 3.8A max, and each WS2811 LED consumes 60 mA max, so at least 63 LED could be powered. To stay below absolute maximum only 50
LED is recommended. Any LED string that works with WS2811 compatible protocol could be used.&lt;/p&gt;

&lt;h5 id=&quot;mongoose-os&quot;&gt;Mongoose OS:&lt;/h5&gt;

&lt;p&gt;Mongoose OS is an operating system for the Internet Of Things, it can run on ESP8266, ESP32 and others. Is a blend of easiness and robustness. Ideal for rapid prototyping
of IoT products because of its native built-in cloud connectivity (AWS, Google, Azure).
There are two characteristics that make Mongoose OS so versatile. One of them is the possibility to work “remote/local”. Remote is the default option, and compiles
the code in the cloud, this is good for beginners because avoids the problems related to SDK installations. Local option is based on docker containers and is good for automatic builds
without internet connection.&lt;/p&gt;

&lt;p&gt;Another important characteristic is the use of a scaled down version of JavaScript called mJS as programming language. Advanced functionalities could be written with
few lines of code compared to other languages (Assembler, C, Processing). However, nothing prevents to call functions written in C, especially for time sensitive device drivers.&lt;/p&gt;

&lt;h5 id=&quot;software&quot;&gt;Software:&lt;/h5&gt;

&lt;p&gt;Sample application presented here is composed of two tasks: Send color data for every LED in the string and listen to incoming data coming from the cloud.&lt;/p&gt;

&lt;p&gt;To send data to each LED, the color code is randomly extracted from a predefined color table. Communication to the LED string is made using NEOPIXEL library bundled 
with Mongoose OS.&lt;/p&gt;

&lt;p&gt;An MQTT connection is established to a broker where the app subscribes to a specific topic. A third party client application must connect to the same MQTT broker and publish
data to the same topic to change the color palette used. This is a very simple way to change the light pattern over the internet.&lt;/p&gt;

&lt;h5 id=&quot;circuit-assembly&quot;&gt;Circuit assembly:&lt;/h5&gt;

&lt;p&gt;The circuit was built using components of TUSISTEMITA, like enclosure backplate, power source backplate, NODEMCU breakboard, logic level shifter board and screw
 terminal board. Once the app is downloaded for the first time, and electrical connections verified, the backplate could be attached to the enclosure hassle free. Just unplug
external cables from terminals, screw backplate to enclosure and reconnect cables again.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_PARTS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_PARTS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_WIRED.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_WIRED_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_WORKING.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_WORKING_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Assembly and wiring.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;It is recommended to change the connectors of the LED strip, for a more robust and waterproof connectors. Heatshrink tube with glue (double wall) should 
be used to protect solder joints from the elements.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_CABLEGLAND.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_CABLEGLAND_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_CONNECTOR.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_CONNECTOR_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_FINISHED.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_FINISHED_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Cable glands and waterproof connectors&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Once the enclosure is closed, firmware updates could be done via wirelessly via OTA, using Mongoose OS device management dashboard mDASH.&lt;/p&gt;

&lt;h4 id=&quot;bill-of-materials&quot;&gt;Bill of materials&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;Get yours!&lt;/th&gt;
      &lt;th&gt;Datasheet&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;ESP8266 NodeMCU V3&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_As5zmb&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/NodeMCUV3.pdf&quot;&gt;NodeMCUV3.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;WS2811 waterproof LED string&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AWaLpZ&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/WS2811_WATERPROOF_LED_STRING.pdf&quot;&gt;WS2811_WATERPROOF_LED_STRING.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Switched power supply 5V 3.8A 20W&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9gYBnH&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/5V_4A_switching_power.pdf&quot;&gt;5V_4A_switching_power.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Waterproof plastic enclosure 200x120x75mm (multiple options: transparent lid, wall mounting tabs)&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_ASuE1N&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/g373_g269.pdf&quot;&gt;g373_g269.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;M2.6 self-tapping B type screw&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_98ymAB&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/M2.6x5-6-8-12mm.pdf&quot;&gt;M2.6x5-6-8-12mm.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;M3 countersunk phillips screw&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AoOvPz&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/M2-M10_Stainless_steel_304_countersunk_screw_flat_head_phillips.pdf&quot;&gt;M2-M10_Stainless_steel_304_countersunk_screw_flat_head_phillips.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;M3 hex flanged nut DIN6923&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9g89th&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/FLANGED_NUT_3MM_DIN6923.pdf&quot;&gt;FLANGED_NUT_3MM_DIN6923.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Nylon spacer G228&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_A7PPYf&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/G228.pdf&quot;&gt;G228.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Cable gland PG7 or PG9&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9z6Z4r&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/pg_7.pdf&quot;&gt;pg_7.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3 pin waterproof cable connector for LED string&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AesJgr&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/Waterproof_led_string_connector.pdf&quot;&gt;Waterproof_led_string_connector.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3:1 Heatshrink tube with glue&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AaW9bd&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/3_1_heatshrink_tube_glue.pdf&quot;&gt;3_1_heatshrink_tube_glue.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2:1 Heatshrink tube multiple colors&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9ikkU7&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/2_1_heatshrink_tube_colors.pdf&quot;&gt;2_1_heatshrink_tube_colors.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;tusistemita-blocks&quot;&gt;TUSISTEMITA blocks&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;PCB&lt;/th&gt;
      &lt;th&gt;Source file&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;A02 Backplate for 200x120x75mm enclosure&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/A_BACKPLATES&quot;&gt;A02&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;A05 adapterboard 10.16mm pitch for 5V 3.8A PSU&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/A_BACKPLATES&quot;&gt;A05&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;B01 2x4 3.5mm screw terminal board&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/B_SCREW_TERMINAL_WIRE_CONNECTORS&quot;&gt;B01&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;C08 screw terminal breakout board for NODEMCU V3&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/C_BREAKOUTS&quot;&gt;C08&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;D06 logic level shifter board&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/D_ELECTRONICS&quot;&gt;D06&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;software-1&quot;&gt;Software&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Software&lt;/th&gt;
      &lt;th&gt;Source file&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Firmware&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/MOS_IOT_ADDRESSABLE_LEDS&quot;&gt;MOS_IOT_ADDRESSABLE_LEDS&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;optional-components&quot;&gt;Optional Components:&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;Get yours!&lt;/th&gt;
      &lt;th&gt;Datasheet&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;3 pc step drill bit 3-20 mm + centerpunch&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9vxJV5&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&quot;&gt;3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8 Step drill bit 10-45 mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9Ior51&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/8_steps_10-45mm_incremental_drill_bit.pdf&quot;&gt;8_steps_10-45mm_incremental_drill_bit.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Editor</name></author><category term="english" /><category term="AN001" /><category term="WiFi" /><category term="MONGOOSE OS" /><summary type="html">Decorative lights suitable for Halloween, Christmas, parties, etc. Not only controlled over internet but, also completely reprogrammed wirelessly using OTA over WiFi. Waterproof, dustproof and sturdy. Ideal for indoor projects like interactive backgrounds for youtubers/streamers controlled by their audience and for outdoor projects like advertizing signs in walls or vehicles. Open enclosure showing internal components Key component: WS2811 waterproof LED string. Concept: With the advent of addressable LED like WS2812, WS2812b, WS2811, etc. is now possible for small microcontrollers to handle large amounts of LEDs with only one I/O pin. That advantage popularized this component and a lot of variants appeared: surface mount single leds, flexible strips, Christmas-like strings, etc. The last one will be used in this article due to its flexibility and strength and could adapt easily to different project from Christmas ornaments to led matrix, without soldering or other electrical modifications. The microcontroller chosen was an ESP8266, more exactly a development board known as “NODEMCU V3” which has all additional components necessary to start work on programming the MCU with a computer. The onboard WiFi of the ESP8266 is not only possible to to change light sequences, but also download a totally different firmware wirelessly (OTA), using a powerful combo: Mongoose OS and its remote device management dashboard mDASH. Mongoose OS uses a scaled down version of JavaScript known as mJS. This is an attractive language for web developers whom already work with JS. Mongoose OS is built on top of Espressif’s ESP-iDF, so it is possible to write functions in C, which is also attractive for more “traditional” embedded programmers. The circuit is built using TUSISTEMITA hardware prototyping system, which provides different kinds of prebuilt modules which allows to build an electronic project without soldering, but making it very robust and expandable. All the parts are enclosed in a dustproof and waterproof IP65 box. This enclosure gives an “industrial look” to the project and also adds mechanical strength to withstand abuses. The external electrical connections (AC, and LEDs) were fitted with IP accessories to provide a good seal. Key features: Mongoose OS embedded operating system running on ESP8266. Dustproof, waterproof and wall mountable. Wireless remote firmware update, thanks to Mongoose OS management dashboard mDASH. Built with TUSISTEMITA hardware prototyping blocks 110/220V AC power The circuit is composed of 4 elements well differentiated: Power source, CPU, logic level shifter and LEDs. Power source is switched type, 20W power, 5V output and 110/220V input, so it could be used in any country of the world. ESP8266 was used as CPU (NODEMCU V3). This board can be powered by 3.3V directly to processor power pin or by 5V using the onboard regulator. The high logic level output of ESP8266 is 3.3V, so a logic level shifter is needed for working with 5V sensors. WS2812 works with 5V logic levels so TUSISTEMITA D06 logic level board converter was used. This board is based on BSS138 MOSFET. Simplified block diagram Power source output current is around 3.8A max, and each WS2811 LED consumes 60 mA max, so at least 63 LED could be powered. To stay below absolute maximum only 50 LED is recommended. Any LED string that works with WS2811 compatible protocol could be used. Mongoose OS: Mongoose OS is an operating system for the Internet Of Things, it can run on ESP8266, ESP32 and others. Is a blend of easiness and robustness. Ideal for rapid prototyping of IoT products because of its native built-in cloud connectivity (AWS, Google, Azure). There are two characteristics that make Mongoose OS so versatile. One of them is the possibility to work “remote/local”. Remote is the default option, and compiles the code in the cloud, this is good for beginners because avoids the problems related to SDK installations. Local option is based on docker containers and is good for automatic builds without internet connection. Another important characteristic is the use of a scaled down version of JavaScript called mJS as programming language. Advanced functionalities could be written with few lines of code compared to other languages (Assembler, C, Processing). However, nothing prevents to call functions written in C, especially for time sensitive device drivers. Software: Sample application presented here is composed of two tasks: Send color data for every LED in the string and listen to incoming data coming from the cloud. To send data to each LED, the color code is randomly extracted from a predefined color table. Communication to the LED string is made using NEOPIXEL library bundled with Mongoose OS. An MQTT connection is established to a broker where the app subscribes to a specific topic. A third party client application must connect to the same MQTT broker and publish data to the same topic to change the color palette used. This is a very simple way to change the light pattern over the internet. Circuit assembly: The circuit was built using components of TUSISTEMITA, like enclosure backplate, power source backplate, NODEMCU breakboard, logic level shifter board and screw terminal board. Once the app is downloaded for the first time, and electrical connections verified, the backplate could be attached to the enclosure hassle free. Just unplug external cables from terminals, screw backplate to enclosure and reconnect cables again. Assembly and wiring. It is recommended to change the connectors of the LED strip, for a more robust and waterproof connectors. Heatshrink tube with glue (double wall) should be used to protect solder joints from the elements. Cable glands and waterproof connectors Once the enclosure is closed, firmware updates could be done via wirelessly via OTA, using Mongoose OS device management dashboard mDASH. Bill of materials Component Get yours! Datasheet ESP8266 NodeMCU V3 💸 NodeMCUV3.pdf WS2811 waterproof LED string 💸 WS2811_WATERPROOF_LED_STRING.pdf Switched power supply 5V 3.8A 20W 💸 5V_4A_switching_power.pdf Waterproof plastic enclosure 200x120x75mm (multiple options: transparent lid, wall mounting tabs) 💸 g373_g269.pdf M2.6 self-tapping B type screw 💸 M2.6x5-6-8-12mm.pdf M3 countersunk phillips screw 💸 M2-M10_Stainless_steel_304_countersunk_screw_flat_head_phillips.pdf M3 hex flanged nut DIN6923 💸 FLANGED_NUT_3MM_DIN6923.pdf Nylon spacer G228 💸 G228.pdf Cable gland PG7 or PG9 💸 pg_7.pdf 3 pin waterproof cable connector for LED string 💸 Waterproof_led_string_connector.pdf 3:1 Heatshrink tube with glue 💸 3_1_heatshrink_tube_glue.pdf 2:1 Heatshrink tube multiple colors 💸 2_1_heatshrink_tube_colors.pdf TUSISTEMITA blocks PCB Source file A02 Backplate for 200x120x75mm enclosure A02 A05 adapterboard 10.16mm pitch for 5V 3.8A PSU A05 B01 2x4 3.5mm screw terminal board B01 C08 screw terminal breakout board for NODEMCU V3 C08 D06 logic level shifter board D06 Software Software Source file Firmware MOS_IOT_ADDRESSABLE_LEDS Optional Components: Component Get yours! Datasheet 3 pc step drill bit 3-20 mm + centerpunch 💸 3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf 8 Step drill bit 10-45 mm 💸 8_steps_10-45mm_incremental_drill_bit.pdf</summary></entry><entry><title type="html">Tira de luces LED resistentes al agua controladas por WiFi</title><link href="https://galopago.github.io/espanol/tira-luces-led-resistentes-agua-wifi/" rel="alternate" type="text/html" title="Tira de luces LED resistentes al agua controladas por WiFi" /><published>2021-01-20T00:00:00-05:00</published><updated>2021-01-20T00:00:00-05:00</updated><id>https://galopago.github.io/espanol/tira-luces-led-resistentes-agua-wifi</id><content type="html" xml:base="https://galopago.github.io/espanol/tira-luces-led-resistentes-agua-wifi/">&lt;p&gt;Luces apropiadas para decoraciones navideñas, halloween, etc. No solamente la secuencia puede ser manejadas por internet, sino que
tambien se pueden reprogramar completamente de forma inalambrica (OTA) mediante una conexion WiFi. Construccion robusta 
a prueba de polvo y agua. Ideal para montajes en interiores: como fondo para transmisiones de youtubers/streamers 
(manejadas en tiempo real por su audiencia), exteriores fijos como muros y avisos, o en exteriores moviles como carrozas de carnaval.&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_IOT_LIGHTS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_IOT_LIGHTS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Caja de las luces destapada mostrando sus componentes internos&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p class=&quot;notice--danger&quot;&gt;Componente clave: &lt;a href=&quot;https://s.click.aliexpress.com/e/_AFqDHl&quot;&gt;Tira de LED WS2811 a prueba de agua.&lt;/a&gt;&lt;/p&gt;

&lt;h5 id=&quot;el-concepto&quot;&gt;El concepto:&lt;/h5&gt;

&lt;p&gt;Con la llegada de los LED direccionables como el WS2812, WS2812b, WS2811, etc. fue posible controlar individualmente grandes
cantidades de leds usando un solo pin de microcontrolador!. Dicha facilidad de uso contribuyo a popularizar estos componentes
y a que estos se vendieran en diferentes presentaciones: leds individuales para montaje superficial, series de luces en tiras flexibles, extensiones
de luces tipo “arbol de navidad” a prueba de agua, entre otras. Es precisamente estas ultimas las que seran usadas en este proyecto dado lo facil que
pueden adaptarse a distintos tipos de proyectos como matrices de leds hasta adornos navideños, sin tener que soldar ni hacer modificaciones electricas a las luces.&lt;/p&gt;

&lt;p&gt;Como microcontrolador se uso un ESP8266, mas precisamente una tarjeta conocida como “NODEMCU V3” que incorpora ya todos los elementos adicionales para poder
realizar la programacion inicial desde un computador. Utilizando el WiFi incorporado del ESP8266, no solo es posible controlar las secuencias y colores de las luces desde
internet, sino que tambien es posible descargarle nuevos programas de forma remota (OTA) usando un combo poderoso: El sistema operativo &lt;a href=&quot;https://mongoose-os.com/&quot;&gt;Mongoose OS&lt;/a&gt; junto con
plataforma para gestion remota de dispositivos &lt;a href=&quot;https://mdash.net/&quot;&gt;mDASH&lt;/a&gt;. Mongoose OS usa una version restringida de JavaScript conocida como &lt;a href=&quot;https://github.com/cesanta/mjs&quot;&gt;mJS&lt;/a&gt;, lo que probablemente
resultara atractivo para programadores web que ya trabajan con este tipo de tecnologia. Mongoose OS esta construido sobre el ESP-IDF de Espressif, por lo tanto
pueden hacerse llamados a funciones escritas en C, lo que sin duda tambien resultara atractivo para programadores de microcontroladores “tradicionales” que han
trabajado con este lenguaje bastante maduro.&lt;/p&gt;

&lt;p&gt;En cuanto al montaje fisico, se utilizo el sistema de prototipado de hardware &lt;a href=&quot;https://github.com/galopago/TUSISTEMITA&quot;&gt;TUSISTEMITA&lt;/a&gt; que proporciona una serie de  modulos y elementos preconstruido que
permiten realizar un proyecto electonico sin necesidad de soldaduras, haciendolo facilmente modificable y flexible, pero a la vez robusto. Todo el conjunto va
dentro de una caja a prueba de agua IP65, la cual le proporciona resistencia al polvo y al agua, ademas de darle un aspecto estetico “industrial”  tambien le otorga suficiente
robustez mecanica para soportar uno que otro abuso. Los cables de conexiones electricas externas de la caja, fueron complementadas con accesorios para garantizar
el sellamiento IP65.&lt;/p&gt;

&lt;h4 id=&quot;principales-caracteristicas&quot;&gt;Principales Caracteristicas:&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Sistema Operativo embebido Mongoose OS corriendo sobre ESP8266&lt;/li&gt;
  &lt;li&gt;Resistente al agua y con pestaña para montaje en pared.&lt;/li&gt;
  &lt;li&gt;Actualizacion remota del Firmware gracias a la plataforma de gestion Mongoose OS dashboard mDASH&lt;/li&gt;
  &lt;li&gt;Montaje realizado mediante el sistema de prototipado robusto para hardware electronico TUSISTEMITA&lt;/li&gt;
  &lt;li&gt;Alimentacion 110/220V AC.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;El hardware esta compuesto por 4 elementos bien diferenciados: Fuente de alimentacion, CPU, adaptador de nivel logico y LEDS. La fuente de alimentacion es de
tipo comutada con 20W de potencia, 5 voltios de salida y entrada de 110V a 220V, por lo tanto puede ser usada practicamente en cualquier lugar del mundo. Como CPU
se uso un ESP8266 en una tarjeta NODEMCU V3. Esta tarjeta puede ser alimentada a 3.3V directamente al pin de alimentacion del procesador, o por 5V haciendo uso del regulador incorporado.
Las salidas logicas de la CPU tendran voltajes de 0 a 3.3V, lo que debera ser tenido en cuenta si se desea instalar sensores u otros perifericos que trabajen
a 5V. Es aqui donde entre cobra importancia el adaptador de nivel logico, pues los leds son alimentados a 5V y esperan una señal logica con esta misma amplitud. Como adaptador
de nivel logico se uso la tarjeta TUSISTEMITA D06 que internamente usa un MOSFET BSS138 para realizar dicho trabajo.&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/mos_wifi_iot_lights_blockdiag.png&quot;&gt; &lt;img src=&quot;/assets/images/mos_wifi_iot_lights_blockdiag.png&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Diagrama simplificado de bloques&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;La fuente de poder entrega aproximadamente 3.8 A y cada led WS2811 consume 60 mA como maximo, estando en capacidad de alimentar extensiones de hasta 63 leds. Para
tener cierto margen se ha decidido usar extensiones de maximo 50 leds. Cualquier tipo de tira de LED que use el mismo protocolo del WS2811 puede ser usada.&lt;/p&gt;

&lt;h5 id=&quot;que-es-mongoose-os&quot;&gt;Que es Mongoose OS?:&lt;/h5&gt;
&lt;p&gt;Mongoose OS es un sistema operativo para Internet De las Cosas, compatible con ESP8266, ESP32 entre otros. Combina facilidad con robustez. Es ideal para
el prototipado rapido de productos IoT, pues trae incorporada la conectividad nativa con “nubes” publicas o privadas como AWS, Google, Azure, etc.
Hay dos caracteristicas muy importantes que lo hacen tan versatil. Una de ella es la posibilidad de usarlo “remoto/local”. Remoto, que es la opcion por defecto, la compilacion
se realiza en la nube lo cual evita los problemas clasicos de instalacion de los SDK para desarrollo embebido. 
Tambien existe la posibilidad de instalarlo localmente mediante dockers, en cuyo caso se puede compilar sin tener una conexion a internet.&lt;/p&gt;

&lt;p&gt;La otra caracteristica importante, es que usa como lenguaje de programacion un subconjuto de JavaScript llamado mJS (embedded javascript). Esto hace que se 
puedan crear muchas funcionalidades avanzadas, sin necesidad de escribir tanto codigo como en otros lenguajes usados en sistemas embebidos (Assembler, C, Processing). Sin embargo
nada impide que se puedan llamar funciones escritas en C puro para ganar desempeño, en especial al escribir controladores para sensores y perifericos que
requieren un manejo eficiente de los recursos.&lt;/p&gt;

&lt;h5 id=&quot;el-programa&quot;&gt;El programa:&lt;/h5&gt;

&lt;p&gt;El firmware presentado en este proyecto realiza dos tareas: Encender cada uno de los leds con un color determinado y la otra se encarga de recibir datos
desde la nube.&lt;/p&gt;

&lt;p&gt;Para enviar el dato de color a cada uno de los LED , este se extrae aleatoriamente de una tabla de colores predefinida. La comunicacion con los LED se realiza
mediante la biblioteca NEOPIXEL que incorpora Mongoose OS.&lt;/p&gt;

&lt;p&gt;Para recibir los datos desde la nube, se realiza una conexion MQTT a un broker donde se escucha por un topico especifico. Una aplicacion cliente puede conectarse a este broker MQTT
y enviar un determinado dato al topico que se esta escuchando, y con esto se puede cambiar la paleta de colores que se esta usando para los LED. De esta forma
se presenta una aplicacion de ejemplo muy simple de como modificar la secuencia de forma remota a traves de internet.&lt;/p&gt;

&lt;h5 id=&quot;ensamblaje&quot;&gt;Ensamblaje:&lt;/h5&gt;

&lt;p&gt;El prototipo del sistema fue montado usando varios componentes de TUSISTEMITA, como la placa trasera para montaje, las tarjetas adaptadoras para la fuente y NODEMCU, tarjeta de 
conversion niveles logicos y borneras de tornillos para conexiones de salida. Una vez descargada la aplicacion por primera vez y comprobado que las conexiones electricas funcionan bien,
se puede pasar a la caja para montaje definitivo sin ningun traumatismo. Solamente hay que desconectar la alimentacion electrica de las borneras y la conexion
de salida a los leds, ajustar la placa a la caja y reconectar nuevamente.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_PARTS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_PARTS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_WIRED.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_WIRED_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_WORKING.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_WORKING_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Ensamblaje y cableado.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Se recomienda cambiar los conectores originales de las tiras de led, por unos mucho mas robustos mecanicamente y a prueba de agua, para evitar problemas de oxido en caso
de estar expuestos a los elementos ambientales. Se aconseja el uso de termoencogible con pegamento para mayor proteccion en las uniones entre los cables
de la tira led y los conectores.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_CABLEGLAND.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_CABLEGLAND_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_CONNECTOR.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_CONNECTOR_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/MOS_WIFI_LIGHTS_FINISHED.jpg&quot;&gt; &lt;img src=&quot;/assets/images/MOS_WIFI_LIGHTS_FINISHED_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Conectores para proteccion de los cables&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Una vez la caja se encuentra cerrada, las actualizaciones de firmware se pueden hacer inalambricamente mediante OTA por medio del dashboard de Mongoose
OS mDash.&lt;/p&gt;

&lt;h4 id=&quot;listado-de-materiales&quot;&gt;Listado de materiales&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Componente&lt;/th&gt;
      &lt;th&gt;Consigue el tuyo!&lt;/th&gt;
      &lt;th&gt;Hoja de caracteristicas&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;ESP8266 NodeMCU V3&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AKwJKn&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/NodeMCUV3.pdf&quot;&gt;NodeMCUV3.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tira de LED WS2811 resistente al agua&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AFqDHl&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/WS2811_WATERPROOF_LED_STRING.pdf&quot;&gt;WS2811_WATERPROOF_LED_STRING.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Fuente de alimentacion conmutada 5V 3.8A 20W&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_A57h4j&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/5V_4A_switching_power.pdf&quot;&gt;5V_4A_switching_power.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Caja estanca generica resistente al agua de 200x120x75mm (varias opciones: tapa transparente, salientes para montaje en pared)&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_A2ZqFz&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/g373_g269.pdf&quot;&gt;g373_g269.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tornillo M2.6 autorroscante tipo B&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_A6SvXp&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/M2.6x5-6-8-12mm.pdf&quot;&gt;M2.6x5-6-8-12mm.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tornillo M3 cabeza avellanada en cruz&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AaJKaL&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/M2-M10_Stainless_steel_304_countersunk_screw_flat_head_phillips.pdf&quot;&gt;M2-M10_Stainless_steel_304_countersunk_screw_flat_head_phillips.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tuerca M3 hexagonal con brida DIN6923&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9AB0mF&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/FLANGED_NUT_3MM_DIN6923.pdf&quot;&gt;FLANGED_NUT_3MM_DIN6923.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Espaciador separador de nylon G228&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AqHnWn&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/G228.pdf&quot;&gt;G228.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Conector glandula o prensa estopa PG7 o PG9&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_9AvHyT&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/pg_7.pdf&quot;&gt;pg_7.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Conector resistente al agua para tira led&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AMoPnv&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/Waterproof_led_string_connector.pdf&quot;&gt;Waterproof_led_string_connector.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tubo termoencogible 3:1 con pegamento&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AEtntV&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/3_1_heatshrink_tube_glue.pdf&quot;&gt;3_1_heatshrink_tube_glue.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tubo termoencogible 2:1 multiples colores&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_Ar4Zmf&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/2_1_heatshrink_tube_colors.pdf&quot;&gt;2_1_heatshrink_tube_colors.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;componentes-tusistemita&quot;&gt;Componentes TUSISTEMITA&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;PCB&lt;/th&gt;
      &lt;th&gt;Archivos fuente&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Placa trasera para montaje A02 para caja de 200x120x75mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/A_BACKPLATES&quot;&gt;A02&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Placa adaptadora A05 con agujeros espaciados 10.16mm para fuente 5V 3.8A&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/A_BACKPLATES&quot;&gt;A05&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tarjeta B01 para conexiones mediante terminales de tornillos 2x4 3.5mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/B_SCREW_TERMINAL_WIRE_CONNECTORS&quot;&gt;B01&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tarjeta breakout C08 con salida a terminales de tornillos para NODEMCU V3&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/C_BREAKOUTS&quot;&gt;C08&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tarjeta D06 de conversion de niveles logicos&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/TUSISTEMITA/tree/master/D_ELECTRONICS&quot;&gt;D06&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;software&quot;&gt;Software&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Software&lt;/th&gt;
      &lt;th&gt;Archivos fuente&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Firmware&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/MOS_IOT_ADDRESSABLE_LEDS&quot;&gt;MOS_IOT_ADDRESSABLE_LEDS&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;componentes-opcionales&quot;&gt;Componentes opcionales:&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Componente&lt;/th&gt;
      &lt;th&gt;Consigue el tuyo!&lt;/th&gt;
      &lt;th&gt;Hoja de caracteristicas&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Juego de 3 brocas escalonadas 3-20 mm + centropunto&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_AalUrz&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&quot;&gt;3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Broca escalonada de 8 pasos 10-45 mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_ATtnjt&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/8_steps_10-45mm_incremental_drill_bit.pdf&quot;&gt;8_steps_10-45mm_incremental_drill_bit.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Editor</name></author><category term="espanol" /><category term="AN001" /><category term="WiFi" /><category term="MONGOOSE OS" /><summary type="html">Luces apropiadas para decoraciones navideñas, halloween, etc. No solamente la secuencia puede ser manejadas por internet, sino que tambien se pueden reprogramar completamente de forma inalambrica (OTA) mediante una conexion WiFi. Construccion robusta a prueba de polvo y agua. Ideal para montajes en interiores: como fondo para transmisiones de youtubers/streamers (manejadas en tiempo real por su audiencia), exteriores fijos como muros y avisos, o en exteriores moviles como carrozas de carnaval. Caja de las luces destapada mostrando sus componentes internos Componente clave: Tira de LED WS2811 a prueba de agua. El concepto: Con la llegada de los LED direccionables como el WS2812, WS2812b, WS2811, etc. fue posible controlar individualmente grandes cantidades de leds usando un solo pin de microcontrolador!. Dicha facilidad de uso contribuyo a popularizar estos componentes y a que estos se vendieran en diferentes presentaciones: leds individuales para montaje superficial, series de luces en tiras flexibles, extensiones de luces tipo “arbol de navidad” a prueba de agua, entre otras. Es precisamente estas ultimas las que seran usadas en este proyecto dado lo facil que pueden adaptarse a distintos tipos de proyectos como matrices de leds hasta adornos navideños, sin tener que soldar ni hacer modificaciones electricas a las luces. Como microcontrolador se uso un ESP8266, mas precisamente una tarjeta conocida como “NODEMCU V3” que incorpora ya todos los elementos adicionales para poder realizar la programacion inicial desde un computador. Utilizando el WiFi incorporado del ESP8266, no solo es posible controlar las secuencias y colores de las luces desde internet, sino que tambien es posible descargarle nuevos programas de forma remota (OTA) usando un combo poderoso: El sistema operativo Mongoose OS junto con plataforma para gestion remota de dispositivos mDASH. Mongoose OS usa una version restringida de JavaScript conocida como mJS, lo que probablemente resultara atractivo para programadores web que ya trabajan con este tipo de tecnologia. Mongoose OS esta construido sobre el ESP-IDF de Espressif, por lo tanto pueden hacerse llamados a funciones escritas en C, lo que sin duda tambien resultara atractivo para programadores de microcontroladores “tradicionales” que han trabajado con este lenguaje bastante maduro. En cuanto al montaje fisico, se utilizo el sistema de prototipado de hardware TUSISTEMITA que proporciona una serie de modulos y elementos preconstruido que permiten realizar un proyecto electonico sin necesidad de soldaduras, haciendolo facilmente modificable y flexible, pero a la vez robusto. Todo el conjunto va dentro de una caja a prueba de agua IP65, la cual le proporciona resistencia al polvo y al agua, ademas de darle un aspecto estetico “industrial” tambien le otorga suficiente robustez mecanica para soportar uno que otro abuso. Los cables de conexiones electricas externas de la caja, fueron complementadas con accesorios para garantizar el sellamiento IP65. Principales Caracteristicas: Sistema Operativo embebido Mongoose OS corriendo sobre ESP8266 Resistente al agua y con pestaña para montaje en pared. Actualizacion remota del Firmware gracias a la plataforma de gestion Mongoose OS dashboard mDASH Montaje realizado mediante el sistema de prototipado robusto para hardware electronico TUSISTEMITA Alimentacion 110/220V AC. El hardware esta compuesto por 4 elementos bien diferenciados: Fuente de alimentacion, CPU, adaptador de nivel logico y LEDS. La fuente de alimentacion es de tipo comutada con 20W de potencia, 5 voltios de salida y entrada de 110V a 220V, por lo tanto puede ser usada practicamente en cualquier lugar del mundo. Como CPU se uso un ESP8266 en una tarjeta NODEMCU V3. Esta tarjeta puede ser alimentada a 3.3V directamente al pin de alimentacion del procesador, o por 5V haciendo uso del regulador incorporado. Las salidas logicas de la CPU tendran voltajes de 0 a 3.3V, lo que debera ser tenido en cuenta si se desea instalar sensores u otros perifericos que trabajen a 5V. Es aqui donde entre cobra importancia el adaptador de nivel logico, pues los leds son alimentados a 5V y esperan una señal logica con esta misma amplitud. Como adaptador de nivel logico se uso la tarjeta TUSISTEMITA D06 que internamente usa un MOSFET BSS138 para realizar dicho trabajo. Diagrama simplificado de bloques La fuente de poder entrega aproximadamente 3.8 A y cada led WS2811 consume 60 mA como maximo, estando en capacidad de alimentar extensiones de hasta 63 leds. Para tener cierto margen se ha decidido usar extensiones de maximo 50 leds. Cualquier tipo de tira de LED que use el mismo protocolo del WS2811 puede ser usada. Que es Mongoose OS?: Mongoose OS es un sistema operativo para Internet De las Cosas, compatible con ESP8266, ESP32 entre otros. Combina facilidad con robustez. Es ideal para el prototipado rapido de productos IoT, pues trae incorporada la conectividad nativa con “nubes” publicas o privadas como AWS, Google, Azure, etc. Hay dos caracteristicas muy importantes que lo hacen tan versatil. Una de ella es la posibilidad de usarlo “remoto/local”. Remoto, que es la opcion por defecto, la compilacion se realiza en la nube lo cual evita los problemas clasicos de instalacion de los SDK para desarrollo embebido. Tambien existe la posibilidad de instalarlo localmente mediante dockers, en cuyo caso se puede compilar sin tener una conexion a internet. La otra caracteristica importante, es que usa como lenguaje de programacion un subconjuto de JavaScript llamado mJS (embedded javascript). Esto hace que se puedan crear muchas funcionalidades avanzadas, sin necesidad de escribir tanto codigo como en otros lenguajes usados en sistemas embebidos (Assembler, C, Processing). Sin embargo nada impide que se puedan llamar funciones escritas en C puro para ganar desempeño, en especial al escribir controladores para sensores y perifericos que requieren un manejo eficiente de los recursos. El programa: El firmware presentado en este proyecto realiza dos tareas: Encender cada uno de los leds con un color determinado y la otra se encarga de recibir datos desde la nube. Para enviar el dato de color a cada uno de los LED , este se extrae aleatoriamente de una tabla de colores predefinida. La comunicacion con los LED se realiza mediante la biblioteca NEOPIXEL que incorpora Mongoose OS. Para recibir los datos desde la nube, se realiza una conexion MQTT a un broker donde se escucha por un topico especifico. Una aplicacion cliente puede conectarse a este broker MQTT y enviar un determinado dato al topico que se esta escuchando, y con esto se puede cambiar la paleta de colores que se esta usando para los LED. De esta forma se presenta una aplicacion de ejemplo muy simple de como modificar la secuencia de forma remota a traves de internet. Ensamblaje: El prototipo del sistema fue montado usando varios componentes de TUSISTEMITA, como la placa trasera para montaje, las tarjetas adaptadoras para la fuente y NODEMCU, tarjeta de conversion niveles logicos y borneras de tornillos para conexiones de salida. Una vez descargada la aplicacion por primera vez y comprobado que las conexiones electricas funcionan bien, se puede pasar a la caja para montaje definitivo sin ningun traumatismo. Solamente hay que desconectar la alimentacion electrica de las borneras y la conexion de salida a los leds, ajustar la placa a la caja y reconectar nuevamente. Ensamblaje y cableado. Se recomienda cambiar los conectores originales de las tiras de led, por unos mucho mas robustos mecanicamente y a prueba de agua, para evitar problemas de oxido en caso de estar expuestos a los elementos ambientales. Se aconseja el uso de termoencogible con pegamento para mayor proteccion en las uniones entre los cables de la tira led y los conectores. Conectores para proteccion de los cables Una vez la caja se encuentra cerrada, las actualizaciones de firmware se pueden hacer inalambricamente mediante OTA por medio del dashboard de Mongoose OS mDash. Listado de materiales Componente Consigue el tuyo! Hoja de caracteristicas ESP8266 NodeMCU V3 💸 NodeMCUV3.pdf Tira de LED WS2811 resistente al agua 💸 WS2811_WATERPROOF_LED_STRING.pdf Fuente de alimentacion conmutada 5V 3.8A 20W 💸 5V_4A_switching_power.pdf Caja estanca generica resistente al agua de 200x120x75mm (varias opciones: tapa transparente, salientes para montaje en pared) 💸 g373_g269.pdf Tornillo M2.6 autorroscante tipo B 💸 M2.6x5-6-8-12mm.pdf Tornillo M3 cabeza avellanada en cruz 💸 M2-M10_Stainless_steel_304_countersunk_screw_flat_head_phillips.pdf Tuerca M3 hexagonal con brida DIN6923 💸 FLANGED_NUT_3MM_DIN6923.pdf Espaciador separador de nylon G228 💸 G228.pdf Conector glandula o prensa estopa PG7 o PG9 💸 pg_7.pdf Conector resistente al agua para tira led 💸 Waterproof_led_string_connector.pdf Tubo termoencogible 3:1 con pegamento 💸 3_1_heatshrink_tube_glue.pdf Tubo termoencogible 2:1 multiples colores 💸 2_1_heatshrink_tube_colors.pdf Componentes TUSISTEMITA PCB Archivos fuente Placa trasera para montaje A02 para caja de 200x120x75mm A02 Placa adaptadora A05 con agujeros espaciados 10.16mm para fuente 5V 3.8A A05 Tarjeta B01 para conexiones mediante terminales de tornillos 2x4 3.5mm B01 Tarjeta breakout C08 con salida a terminales de tornillos para NODEMCU V3 C08 Tarjeta D06 de conversion de niveles logicos D06 Software Software Archivos fuente Firmware MOS_IOT_ADDRESSABLE_LEDS Componentes opcionales: Componente Consigue el tuyo! Hoja de caracteristicas Juego de 3 brocas escalonadas 3-20 mm + centropunto 💸 3_pc_set_3-20mm_drill_bit_incremental_center_punch.pdf Broca escalonada de 8 pasos 10-45 mm 💸 8_steps_10-45mm_incremental_drill_bit.pdf</summary></entry><entry><title type="html">Nodo LoRa basado en RAK811 y alimentado por baterias AA</title><link href="https://galopago.github.io/espanol/nodo-lora-rak811-aa/" rel="alternate" type="text/html" title="Nodo LoRa basado en RAK811 y alimentado por baterias AA" /><published>2020-10-15T00:00:00-05:00</published><updated>2020-10-15T00:00:00-05:00</updated><id>https://galopago.github.io/espanol/nodo-lora-rak811-aa</id><content type="html" xml:base="https://galopago.github.io/espanol/nodo-lora-rak811-aa/">&lt;p&gt;Nodo LoRa concebido para la experimentacion. Se conecta facilmente con casi cualquier tipo de sensor. Diseñado para instalarse dentro
de una caja generica resistente al agua, solo hay que agregar un par de pilas AA alcalinas, y listo para usarse!&lt;/p&gt;

&lt;p class=&quot;notice--danger&quot;&gt;Componente clave: &lt;a href=&quot;https://s.click.aliexpress.com/e/_eOuZFX&quot;&gt;Modulo LoRa RAK811.&lt;/a&gt;&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_OPEN.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_OPEN_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Nodo Lora dentro de la caja resistente agua.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h4 id=&quot;principales-caracteristicas&quot;&gt;Principales caracteristicas:&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Hardware &amp;amp; Software de Codigo Libre&lt;/li&gt;
  &lt;li&gt;Se alimenta con 2 pilas AA (1.5v) .&lt;/li&gt;
  &lt;li&gt;Resistente al agua y montable en pared.&lt;/li&gt;
  &lt;li&gt;RAK811=SX1276+STM32L151. No se necesita microcontrolador adicional.&lt;/li&gt;
  &lt;li&gt;Programacion mediante &lt;a href=&quot;https://docs.rakwireless.com/RUI/&quot;&gt;RAK RUI API&lt;/a&gt;, o STM32 CUBE LoRa stack.&lt;/li&gt;
  &lt;li&gt;Area para expansion y/o Prototipado.&lt;/li&gt;
  &lt;li&gt;Pads para soldar antena de resorte interna o conector U.FL para externa.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;listado-de-materiales&quot;&gt;Listado de materiales&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Componente&lt;/th&gt;
      &lt;th&gt;Consigue el tuyo!&lt;/th&gt;
      &lt;th&gt;Hoja de caracteristicas&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Modulo LoRa RAK811&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eLfvcx&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/RAK811.pdf&quot;&gt;RAK811.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Caja generica resistente al agua de 83x58x33mm  (varias opciones: tapa transparente, salientes para montaje en pared)&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_etjbbv&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/AK10019-A1.pdf&quot;&gt;AK10019-A1.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tornillo autorroscante M2.6  tipo B&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_esHHyb&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/M2.6x5-6-8-12mm.pdf&quot;&gt;M2.6x5-6-8-12mm.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Soporte para bateria AA para montaje en PCB&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eLNd1H&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/BH311.pdf&quot;&gt;BH311.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Bornera de tornillo kf350 3.5mm 3 pines&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eLjzKB&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/KF350.pdf&quot;&gt;KF350.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Antena de resorte para 433,868,915 MHz&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eMkqgn&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/SW433-TH32.pdf&quot;&gt;SW433-TH32.pdf&lt;/a&gt; &lt;a href=&quot;/assets/pdf/SW868-TH06.pdf&quot;&gt;SW868-TH06.pdf&lt;/a&gt; &lt;a href=&quot;/assets/pdf/SW915-TH12.pdf&quot;&gt;SW915-TH12.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Conector de hilera de pines hembra 2.54mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eNYVzN&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/FHA3-S1XX.pdf&quot;&gt;FHA3-SXX.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Conector de hilera de pines macho 2.54mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eP34IL&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/PHA1-S3XX.pdf&quot;&gt;PHA1-S3XX.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;tarjetas-de-circuito-impreso&quot;&gt;Tarjetas de Circuito Impreso&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;PCB&lt;/th&gt;
      &lt;th&gt;Archivos fuente&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Tarjeta principal&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/RAK811_LORA_ADAPTABLE_NODE&quot;&gt;RAK811 LORA ADAPTABLE NODE&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tarjeta de expansion&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/RAK_LORA_ADAPTABLE_NODE_BREAKOUT_2AA&quot;&gt;RAK LORA ADAPTABLE NODE BREAKOUT 2AA&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;software&quot;&gt;Software&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Software&lt;/th&gt;
      &lt;th&gt;Archivos fuentes&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Firmware&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/RAK811_RUI_SWITCH_SENSOR&quot;&gt;RAK811 RUI SWITCH SENSOR&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;personalizacion&quot;&gt;Personalizacion&lt;/h3&gt;
&lt;p&gt;El proyecto ha sido dividido en 4 principales aspectos: fuente de alimentacion, caja, antena y expansion. Cada uno de los cuales puede ser modificado segun los requerimientos propios. Finalmente se presentara una aplicacion de ejemplo para mostrar como implementar su propio sensor.&lt;/p&gt;

&lt;h5 id=&quot;fuente-de-alimentacion&quot;&gt;Fuente de alimentacion&lt;/h5&gt;
&lt;p&gt;El dispositivo puede operar desde 1.8v hasta 3.7v. Hay varias alternativas para hacerlo:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;2 Pilas alcalinas AA. Se deberan cortocircuitar las posiciones 1-2 del jumper JP1.&lt;/li&gt;
  &lt;li&gt;1 Pila de litio 14500. Se deberan cortocircuitar las posiciones 2-3 del jumper JP1. El soporte para la bateria BT2 puede ser removido, liberando un poco de espacio en el PCB.&lt;/li&gt;
  &lt;li&gt;Fuente de alimentacion externa en la bornera J1. Los soportes para baterias BT1 y BT2 pueden ser removidos, liberando aun mas espacio en el PCB.&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;caja&quot;&gt;Caja&lt;/h5&gt;
&lt;p&gt;El PCB tiene las dimensiones correctas para ser instalado dentro de una caja plastica “generica” a prueba de agua de &lt;strong&gt;83x58x33mm&lt;/strong&gt; . Estas cajas vienen en multiples variantes: gris, negro, blanco, tapa transparente, salientes para montaje en pared, etc. La tarjeta se fija a la caja mediante 2 tornillos autorroscantes.&lt;/p&gt;

&lt;h5 id=&quot;expansion&quot;&gt;Expansion&lt;/h5&gt;

&lt;figure class=&quot;half&quot;&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_EXPANSION.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_EXPANSION_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_PINOUT.png&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_PINOUT.png&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Area para expansion y/o prototipado.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;El area de prototipado contiene pads para soldadura que estan conectados a todos los pines del modulo RAK811, adicionalmente hay algunos pads libres para realizar algo de prototipado mediante cable y soldadura. Las conexiones a sensores externos se realizan mediante las borneras W, X, Y, Z. En caso que la inmensa area para prototipado no sea suficiente, se pueden soldar &lt;a href=&quot;https://rimstar.org/science_electronics_projects/pin_headers_soldering_cutting_male_female.htm&quot;&gt;regletas de conectores hembra&lt;/a&gt; para agregar una tarjeta de expansion desmontable.
Notese que el RAK811-LF y RAK811-HF tienen algunas diferencias en unos cuantos pines de i/o.&lt;/p&gt;

&lt;h5 id=&quot;opciones-de-antena&quot;&gt;Opciones de antena&lt;/h5&gt;
&lt;p&gt;Antena interna de resorte soldada en el pad J6, se deberan cortocircuitar las posiciones 1-2 del jumper JP2.&lt;/p&gt;

&lt;p&gt;Antena externa usando conector U.FL, se deberan cortocircuitar las posiciones 2-3 del jumper JP2.&lt;/p&gt;

&lt;h5 id=&quot;aprovisionamiento&quot;&gt;Aprovisionamiento&lt;/h5&gt;
&lt;p&gt;Como el codigo es derivado de un producto existente de RAK Wireless, se usan los mismos comandos  AT para el aprovisionamiento del nodo en la red LoRa usando la UART. Para mayor informacion ver el  &lt;a href=&quot;/assets/pdf/RAK811_AT_Command_Manual_V1.0.pdf&quot;&gt;manual&lt;/a&gt; que contiene los comandos completos AT.&lt;/p&gt;

&lt;h5 id=&quot;aplicacion-de-ejemplo&quot;&gt;Aplicacion de ejemplo&lt;/h5&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_RESISTORS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_RESISTORS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_REEDSWITCH.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_REEDSWITCH_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_CLOSED.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_CLOSED_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Nodo LoRa interruptor magnetico.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;La aplicacion de ejemplo consiste en un interruptor magnetico LoRa que transmite un paquete cada vez que se cierra o se abre el contacto debido al efecto de acercar o alejar el iman. Para ello se instalo un reed switch pequeño en una de las paredes al interior de la caja.
La tarjeta de expansion es usada para instalar los componentes suplementarios: Led indicador de transmision, resistencias de pullup, pulsador para  prueba de transmision, y divisor de voltaje para monitoreo de bateria.&lt;/p&gt;

&lt;p&gt;Cualquier otro sensor de tipo interruptor (&lt;a href=&quot;http://blog.vidianindhita.com/2018/02/27/all-about-tilt-switches/&quot;&gt;sensor de inclinacion por esferas, resorte detector de vibracion&lt;/a&gt;, etc.) puede ser agregado!&lt;/p&gt;

&lt;p&gt;Para hacer las conexiones se uso cable con recubrimiento PVDF por su alta resistencia al calor, en especial al soldar con cautin!. 
Para mas informacion sobre el &lt;a href=&quot;#tarjetas-de-circuito-impreso&quot;&gt;PCB&lt;/a&gt; o el  &lt;a href=&quot;#software&quot;&gt;firmware&lt;/a&gt;, recuerde consultar los &lt;a href=&quot;#tarjetas-de-circuito-impreso&quot;&gt;repositorios vinculados&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;componentes-opcionales&quot;&gt;Componentes opcionales:&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Componente&lt;/th&gt;
      &lt;th&gt;Consigue el tuyo!&lt;/th&gt;
      &lt;th&gt;Hoja de caracteristicas&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Alambre 30 AWG con recubrimiento PVDF UL1423&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eL2EYB&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/UL1423.pdf&quot;&gt;UL1423.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Conector para antena externa U.FL montaje superficial&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_esRDv9&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/6474011114.pdf&quot;&gt;6474011114.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Reed switch plastico pequeño&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eMfNwB&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/GPS-11A.pdf&quot;&gt;GPS-11A.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Iman para fijacion en pared mediante tornillos&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eNjkcJ&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/MC-38.pdf&quot;&gt;MC-38.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Sensor de vibracion tipo resorte&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eNnywb&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/SW-18015p.pdf&quot;&gt;SW-18015p.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Sensor de inclinacion por esferas&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eMEXVd&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/SW-200D.pdf&quot;&gt;SW-200D.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Resistencias TH 1/4W 1%&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_etm4gJ&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/MGR-SERIES.pdf&quot;&gt;MGR-SERIES.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Led 3mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eN09ER&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/1254-10SYGD.pdf&quot;&gt;1254-10SYGD.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Interruptor momentaneo pulsador  6x6mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_etiG5l&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/TS-1301.pdf&quot;&gt;TS-1301.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Editor</name></author><category term="espanol" /><category term="AN000" /><category term="LoRaWAN" /><summary type="html">Nodo LoRa concebido para la experimentacion. Se conecta facilmente con casi cualquier tipo de sensor. Diseñado para instalarse dentro de una caja generica resistente al agua, solo hay que agregar un par de pilas AA alcalinas, y listo para usarse! Componente clave: Modulo LoRa RAK811. Nodo Lora dentro de la caja resistente agua. Principales caracteristicas: Hardware &amp;amp; Software de Codigo Libre Se alimenta con 2 pilas AA (1.5v) . Resistente al agua y montable en pared. RAK811=SX1276+STM32L151. No se necesita microcontrolador adicional. Programacion mediante RAK RUI API, o STM32 CUBE LoRa stack. Area para expansion y/o Prototipado. Pads para soldar antena de resorte interna o conector U.FL para externa. Listado de materiales Componente Consigue el tuyo! Hoja de caracteristicas Modulo LoRa RAK811 💸 RAK811.pdf Caja generica resistente al agua de 83x58x33mm (varias opciones: tapa transparente, salientes para montaje en pared) 💸 AK10019-A1.pdf Tornillo autorroscante M2.6 tipo B 💸 M2.6x5-6-8-12mm.pdf Soporte para bateria AA para montaje en PCB 💸 BH311.pdf Bornera de tornillo kf350 3.5mm 3 pines 💸 KF350.pdf Antena de resorte para 433,868,915 MHz 💸 SW433-TH32.pdf SW868-TH06.pdf SW915-TH12.pdf Conector de hilera de pines hembra 2.54mm 💸 FHA3-SXX.pdf Conector de hilera de pines macho 2.54mm 💸 PHA1-S3XX.pdf Tarjetas de Circuito Impreso PCB Archivos fuente Tarjeta principal RAK811 LORA ADAPTABLE NODE Tarjeta de expansion RAK LORA ADAPTABLE NODE BREAKOUT 2AA Software Software Archivos fuentes Firmware RAK811 RUI SWITCH SENSOR Personalizacion El proyecto ha sido dividido en 4 principales aspectos: fuente de alimentacion, caja, antena y expansion. Cada uno de los cuales puede ser modificado segun los requerimientos propios. Finalmente se presentara una aplicacion de ejemplo para mostrar como implementar su propio sensor. Fuente de alimentacion El dispositivo puede operar desde 1.8v hasta 3.7v. Hay varias alternativas para hacerlo: 2 Pilas alcalinas AA. Se deberan cortocircuitar las posiciones 1-2 del jumper JP1. 1 Pila de litio 14500. Se deberan cortocircuitar las posiciones 2-3 del jumper JP1. El soporte para la bateria BT2 puede ser removido, liberando un poco de espacio en el PCB. Fuente de alimentacion externa en la bornera J1. Los soportes para baterias BT1 y BT2 pueden ser removidos, liberando aun mas espacio en el PCB. Caja El PCB tiene las dimensiones correctas para ser instalado dentro de una caja plastica “generica” a prueba de agua de 83x58x33mm . Estas cajas vienen en multiples variantes: gris, negro, blanco, tapa transparente, salientes para montaje en pared, etc. La tarjeta se fija a la caja mediante 2 tornillos autorroscantes. Expansion Area para expansion y/o prototipado. El area de prototipado contiene pads para soldadura que estan conectados a todos los pines del modulo RAK811, adicionalmente hay algunos pads libres para realizar algo de prototipado mediante cable y soldadura. Las conexiones a sensores externos se realizan mediante las borneras W, X, Y, Z. En caso que la inmensa area para prototipado no sea suficiente, se pueden soldar regletas de conectores hembra para agregar una tarjeta de expansion desmontable. Notese que el RAK811-LF y RAK811-HF tienen algunas diferencias en unos cuantos pines de i/o. Opciones de antena Antena interna de resorte soldada en el pad J6, se deberan cortocircuitar las posiciones 1-2 del jumper JP2. Antena externa usando conector U.FL, se deberan cortocircuitar las posiciones 2-3 del jumper JP2. Aprovisionamiento Como el codigo es derivado de un producto existente de RAK Wireless, se usan los mismos comandos AT para el aprovisionamiento del nodo en la red LoRa usando la UART. Para mayor informacion ver el manual que contiene los comandos completos AT. Aplicacion de ejemplo Nodo LoRa interruptor magnetico. La aplicacion de ejemplo consiste en un interruptor magnetico LoRa que transmite un paquete cada vez que se cierra o se abre el contacto debido al efecto de acercar o alejar el iman. Para ello se instalo un reed switch pequeño en una de las paredes al interior de la caja. La tarjeta de expansion es usada para instalar los componentes suplementarios: Led indicador de transmision, resistencias de pullup, pulsador para prueba de transmision, y divisor de voltaje para monitoreo de bateria. Cualquier otro sensor de tipo interruptor (sensor de inclinacion por esferas, resorte detector de vibracion, etc.) puede ser agregado! Para hacer las conexiones se uso cable con recubrimiento PVDF por su alta resistencia al calor, en especial al soldar con cautin!. Para mas informacion sobre el PCB o el firmware, recuerde consultar los repositorios vinculados Componentes opcionales: Componente Consigue el tuyo! Hoja de caracteristicas Alambre 30 AWG con recubrimiento PVDF UL1423 💸 UL1423.pdf Conector para antena externa U.FL montaje superficial 💸 6474011114.pdf Reed switch plastico pequeño 💸 GPS-11A.pdf Iman para fijacion en pared mediante tornillos 💸 MC-38.pdf Sensor de vibracion tipo resorte 💸 SW-18015p.pdf Sensor de inclinacion por esferas 💸 SW-200D.pdf Resistencias TH 1/4W 1% 💸 MGR-SERIES.pdf Led 3mm 💸 1254-10SYGD.pdf Interruptor momentaneo pulsador 6x6mm 💸 TS-1301.pdf</summary></entry><entry><title type="html">RAK811 based LoRa Node powered by AA batteries</title><link href="https://galopago.github.io/english/rak811-lora-node-aa/" rel="alternate" type="text/html" title="RAK811 based LoRa Node powered by AA batteries" /><published>2020-10-15T00:00:00-05:00</published><updated>2020-10-15T00:00:00-05:00</updated><id>https://galopago.github.io/english/rak811-lora-node-aa</id><content type="html" xml:base="https://galopago.github.io/english/rak811-lora-node-aa/">&lt;p&gt;LoRa node conceived for experimentation. Easy to interface to multiple kind of sensors. Designed to fit
inside a generic waterproof enclosure, just add a pair of AA alkaline batteries and deploy!&lt;/p&gt;

&lt;p class=&quot;notice--danger&quot;&gt;Core component: &lt;a href=&quot;https://s.click.aliexpress.com/e/_eOuZFX&quot;&gt;RAK811 LoRa module.&lt;/a&gt;&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_OPEN.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_OPEN_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Lora Node inside waterproof case&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h4 id=&quot;key-features&quot;&gt;Key features:&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Open source Hardware &amp;amp; Software&lt;/li&gt;
  &lt;li&gt;Powered by 2xAA (1.5v) batteries.&lt;/li&gt;
  &lt;li&gt;Waterproof &amp;amp; wall mountable.&lt;/li&gt;
  &lt;li&gt;RAK811=SX1276+STM32L151. No additional μC needed.&lt;/li&gt;
  &lt;li&gt;Build environment: &lt;a href=&quot;https://docs.rakwireless.com/RUI/&quot;&gt;RAK RUI API&lt;/a&gt;, or STM32 CUBE LoRa stack.&lt;/li&gt;
  &lt;li&gt;Prototyping/expansion area.&lt;/li&gt;
  &lt;li&gt;Pad for a spring antenna or U.FL connector for external ant.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;bill-of-materials&quot;&gt;Bill Of Materials&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;Get yours!&lt;/th&gt;
      &lt;th&gt;Datasheet&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;RAK811 LoRa Module&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eOuZFX&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/RAK811.pdf&quot;&gt;RAK811.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Generic 83x58x33mm waterproof enclosure box (wall mounting tabs, clear cover options available)&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eNGM5X&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/AK10019-A1.pdf&quot;&gt;AK10019-A1.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;M2.6 self-tapping B-type screw&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eOJ3Kd&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/M2.6x5-6-8-12mm.pdf&quot;&gt;M2.6x5-6-8-12mm.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Single AA battery holder for PCB mounting&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eLS8qh&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/BH311.pdf&quot;&gt;BH311.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Screw terminal kf350 3.5mm 3 pin&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eKkaWv&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/KF350.pdf&quot;&gt;KF350.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Spring antenna for 433,868,915 MHz&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eNNciZ&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/SW433-TH32.pdf&quot;&gt;SW433-TH32.pdf&lt;/a&gt; &lt;a href=&quot;/assets/pdf/SW868-TH06.pdf&quot;&gt;SW868-TH06.pdf&lt;/a&gt; &lt;a href=&quot;/assets/pdf/SW915-TH12.pdf&quot;&gt;SW915-TH12.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Female header 2.54mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eN8wK1&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/FHA3-S1XX.pdf&quot;&gt;FHA3-SXX.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Male pin header 2.54mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eMCUJv&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/PHA1-S3XX.pdf&quot;&gt;PHA1-S3XX.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;printed-circuit-boards&quot;&gt;Printed Circuit Boards&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;PCB&lt;/th&gt;
      &lt;th&gt;Source files&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Main circuit board&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/RAK811_LORA_ADAPTABLE_NODE&quot;&gt;RAK811 LORA ADAPTABLE NODE&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Breakout/expansion&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/RAK_LORA_ADAPTABLE_NODE_BREAKOUT_2AA&quot;&gt;RAK LORA ADAPTABLE NODE BREAKOUT 2AA&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;software&quot;&gt;Software&lt;/h4&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Software&lt;/th&gt;
      &lt;th&gt;Source files&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Firmware&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://github.com/galopago/RAK811_RUI_SWITCH_SENSOR&quot;&gt;RAK811 RUI SWITCH SENSOR&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;customization&quot;&gt;Customization&lt;/h3&gt;
&lt;p&gt;The project is divided in four main aspects: power source, enclosure, antenna and expansion which can be modified for the exact requirements. Finally a sample application is given as a way to show how to implement your own sensor solution.&lt;/p&gt;

&lt;h5 id=&quot;power-source&quot;&gt;Power source&lt;/h5&gt;
&lt;p&gt;The device can work from 1.8v up to 3.7v. There are many alternatives to power it:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;2 x AA alkaline batteries. JP1 jumper positions 1-2 shorted.&lt;/li&gt;
  &lt;li&gt;1 x 14500 lithium battery. JP1 jumper positions 2-3 shorted. The BT2 battery holder could be removed, freeing up some PCB space.&lt;/li&gt;
  &lt;li&gt;External power applied to J1 screw terminal. BT1 and BT2 battery holders could be removed, freeing up even more PCB space.&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;enclosure&quot;&gt;Enclosure&lt;/h5&gt;
&lt;p&gt;The PCB fits inside a “generic” unbranded &lt;strong&gt;83x58x33mm&lt;/strong&gt; waterproof plastic enclosure. These enclosures came in multiple flavors: gray, white, black, clear lid, wall mounting tabs. The board is fixed to the enclosure by two self tapping screws.&lt;/p&gt;

&lt;h5 id=&quot;expansion&quot;&gt;Expansion&lt;/h5&gt;

&lt;figure class=&quot;half&quot;&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_EXPANSION.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_EXPANSION_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_PINOUT.png&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_PINOUT.png&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;PCB expansion area&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The prototyping area contains through hole soldering pads routed to all pins of RAK811 module, plus  some small amount of free connected pads for prototyping. Connections for outside detachable sensors are provided via W,X,Y,Z screw terminals. If the vast prototyping area isn’t enough, &lt;a href=&quot;https://rimstar.org/science_electronics_projects/pin_headers_soldering_cutting_male_female.htm&quot;&gt;female pin headers&lt;/a&gt; could be soldered and an expansion board could be plugged in.
Notice that RAK811-LF and RAK811-HF have slighter differences in some i/o pins&lt;/p&gt;

&lt;h5 id=&quot;antenna-options&quot;&gt;Antenna options&lt;/h5&gt;
&lt;p&gt;Internal spring antena soldered on J6, JP2  jumper positions 1-2 shorted.&lt;br /&gt;
External antenna using U.FL. connector, JP2 jumper positions 2-3 shorted.&lt;/p&gt;

&lt;h5 id=&quot;provisioning&quot;&gt;Provisioning&lt;/h5&gt;
&lt;p&gt;As the code was derived from a RAK Wireless existing product, it uses de same AT commands for provisioning using UART. Here is the  &lt;a href=&quot;/assets/pdf/RAK811_AT_Command_Manual_V1.0.pdf&quot;&gt;manual&lt;/a&gt; with the complete AT commands.&lt;/p&gt;

&lt;h5 id=&quot;sample-application&quot;&gt;Sample application&lt;/h5&gt;

&lt;figure class=&quot;third&quot;&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_RESISTORS.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_RESISTORS_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_REEDSWITCH.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_REEDSWITCH_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;a href=&quot;/assets/images/RAK811_NODE_CLOSED.jpg&quot;&gt; &lt;img src=&quot;/assets/images/RAK811_NODE_CLOSED_MEDIUM.jpg&quot; /&gt; &lt;/a&gt;
	&lt;figcaption&gt;Magnetic Switch LoRa sensor node&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The sample applications consist in a LoRa magnetic switch sensor which transmits a packet when the switch opens or closes. A very small reed switch is installed in one of the walls inside enclosure.
Breakout board  was used to install the supplementary electronic components: Led indicator, pullup resistors, test button, and voltage divider for battery monitoring.&lt;/p&gt;

&lt;p&gt;Any other kind of switch sensor (&lt;a href=&quot;http://blog.vidianindhita.com/2018/02/27/all-about-tilt-switches/&quot;&gt;ball inclination sensor, spring vibration sensor&lt;/a&gt;, etc.) could be added!&lt;/p&gt;

&lt;p&gt;PVDF wire was used to make connections because the insulation resists pretty well soldering iron abuse!. 
For more information about the &lt;a href=&quot;#printed-circuit-boards&quot;&gt;PCB&lt;/a&gt; or the &lt;a href=&quot;#software&quot;&gt;firmware&lt;/a&gt;, don’t forget to read the &lt;a href=&quot;#printed-circuit-boards&quot;&gt;linked repositories.&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;optional-components&quot;&gt;Optional components:&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Component&lt;/th&gt;
      &lt;th&gt;Get yours!&lt;/th&gt;
      &lt;th&gt;Datasheet&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;30 AWG wire wrap UL1423 PVDF cable&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eMiimB&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/UL1423.pdf&quot;&gt;UL1423.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;U.FL smd external antenna conector&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eLJ9zD&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/6474011114.pdf&quot;&gt;6474011114.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Plastic small reed switch&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eOoX6T&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/GPS-11A.pdf&quot;&gt;GPS-11A.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Magnet with screw tabs for wall mounting&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eOmX4J&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/MC-38.pdf&quot;&gt;MC-38.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Vibration spring sensor&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_etYDMP&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/SW-18015p.pdf&quot;&gt;SW-18015p.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tilt ball sensor&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eNI7aF&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/SW-200D.pdf&quot;&gt;SW-200D.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1/4W 1%  TH Resistors&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eMCbH1&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/MGR-SERIES.pdf&quot;&gt;MGR-SERIES.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3mm led&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eMDYML&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/1254-10SYGD.pdf&quot;&gt;1254-10SYGD.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Push button  6x6mm&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://s.click.aliexpress.com/e/_eKd4YV&quot;&gt;💸&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;/assets/pdf/TS-1301.pdf&quot;&gt;TS-1301.pdf&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Editor</name></author><category term="english" /><category term="AN000" /><category term="LoRaWAN" /><summary type="html">LoRa node conceived for experimentation. Easy to interface to multiple kind of sensors. Designed to fit inside a generic waterproof enclosure, just add a pair of AA alkaline batteries and deploy! Core component: RAK811 LoRa module. Lora Node inside waterproof case Key features: Open source Hardware &amp;amp; Software Powered by 2xAA (1.5v) batteries. Waterproof &amp;amp; wall mountable. RAK811=SX1276+STM32L151. No additional μC needed. Build environment: RAK RUI API, or STM32 CUBE LoRa stack. Prototyping/expansion area. Pad for a spring antenna or U.FL connector for external ant. Bill Of Materials Component Get yours! Datasheet RAK811 LoRa Module 💸 RAK811.pdf Generic 83x58x33mm waterproof enclosure box (wall mounting tabs, clear cover options available) 💸 AK10019-A1.pdf M2.6 self-tapping B-type screw 💸 M2.6x5-6-8-12mm.pdf Single AA battery holder for PCB mounting 💸 BH311.pdf Screw terminal kf350 3.5mm 3 pin 💸 KF350.pdf Spring antenna for 433,868,915 MHz 💸 SW433-TH32.pdf SW868-TH06.pdf SW915-TH12.pdf Female header 2.54mm 💸 FHA3-SXX.pdf Male pin header 2.54mm 💸 PHA1-S3XX.pdf Printed Circuit Boards PCB Source files Main circuit board RAK811 LORA ADAPTABLE NODE Breakout/expansion RAK LORA ADAPTABLE NODE BREAKOUT 2AA Software Software Source files Firmware RAK811 RUI SWITCH SENSOR Customization The project is divided in four main aspects: power source, enclosure, antenna and expansion which can be modified for the exact requirements. Finally a sample application is given as a way to show how to implement your own sensor solution. Power source The device can work from 1.8v up to 3.7v. There are many alternatives to power it: 2 x AA alkaline batteries. JP1 jumper positions 1-2 shorted. 1 x 14500 lithium battery. JP1 jumper positions 2-3 shorted. The BT2 battery holder could be removed, freeing up some PCB space. External power applied to J1 screw terminal. BT1 and BT2 battery holders could be removed, freeing up even more PCB space. Enclosure The PCB fits inside a “generic” unbranded 83x58x33mm waterproof plastic enclosure. These enclosures came in multiple flavors: gray, white, black, clear lid, wall mounting tabs. The board is fixed to the enclosure by two self tapping screws. Expansion PCB expansion area The prototyping area contains through hole soldering pads routed to all pins of RAK811 module, plus some small amount of free connected pads for prototyping. Connections for outside detachable sensors are provided via W,X,Y,Z screw terminals. If the vast prototyping area isn’t enough, female pin headers could be soldered and an expansion board could be plugged in. Notice that RAK811-LF and RAK811-HF have slighter differences in some i/o pins Antenna options Internal spring antena soldered on J6, JP2 jumper positions 1-2 shorted. External antenna using U.FL. connector, JP2 jumper positions 2-3 shorted. Provisioning As the code was derived from a RAK Wireless existing product, it uses de same AT commands for provisioning using UART. Here is the manual with the complete AT commands. Sample application Magnetic Switch LoRa sensor node The sample applications consist in a LoRa magnetic switch sensor which transmits a packet when the switch opens or closes. A very small reed switch is installed in one of the walls inside enclosure. Breakout board was used to install the supplementary electronic components: Led indicator, pullup resistors, test button, and voltage divider for battery monitoring. Any other kind of switch sensor (ball inclination sensor, spring vibration sensor, etc.) could be added! PVDF wire was used to make connections because the insulation resists pretty well soldering iron abuse!. For more information about the PCB or the firmware, don’t forget to read the linked repositories. Optional components: Component Get yours! Datasheet 30 AWG wire wrap UL1423 PVDF cable 💸 UL1423.pdf U.FL smd external antenna conector 💸 6474011114.pdf Plastic small reed switch 💸 GPS-11A.pdf Magnet with screw tabs for wall mounting 💸 MC-38.pdf Vibration spring sensor 💸 SW-18015p.pdf Tilt ball sensor 💸 SW-200D.pdf 1/4W 1% TH Resistors 💸 MGR-SERIES.pdf 3mm led 💸 1254-10SYGD.pdf Push button 6x6mm 💸 TS-1301.pdf</summary></entry></feed>